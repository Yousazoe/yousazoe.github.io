<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="mask-icon" href="/images/favicon.ico" color="#222"><meta name="baidu-site-verification" content="slBbq5f8WxljPytW"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="//fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"><link rel="stylesheet" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//fastly.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//fastly.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"yousazoe.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!0,comments:{style:"tabs",active:null,storage:!0,lazyload:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:3,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Yin-Yang Countdown by        Cheolhong Kim             引言太极图形课会分成「太极」语言与计算机「图形学」两部分。前半部分主讲太极编程语言的基础语法，高级用法，以及调试和优化太极程序的方式。后半部分侧重于图形学知识，我们将以实践者的角度来聊一聊基于太极语言的渲染和仿真。"><meta property="og:type" content="article"><meta property="og:title" content="Taichi Introduction"><meta property="og:url" content="https://yousazoe.top/archives/ed318fdc.html"><meta property="og:site_name" content="Fl0w3r"><meta property="og:description" content="Yin-Yang Countdown by        Cheolhong Kim             引言太极图形课会分成「太极」语言与计算机「图形学」两部分。前半部分主讲太极编程语言的基础语法，高级用法，以及调试和优化太极程序的方式。后半部分侧重于图形学知识，我们将以实践者的角度来聊一聊基于太极语言的渲染和仿真。"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/96128c71718411.5bcf14c1f04f0.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004214556740.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004214813110.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004215714434.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004215951646.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004221559912.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004223953449.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004224600321.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005153456003.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005153917238.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005155312954.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005161737629.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170259428.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170347686.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170500849.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170526423.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170549660.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170825913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170853534.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170958009.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171213741.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171404179.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171437401.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171503115.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171526887.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006181822597.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006181923921.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006182001712.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184212725.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184626978.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184808681.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184901515.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172357423.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172425164.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172503586.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173036274.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173100413.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007175213793.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007180137581.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173126433.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007180825132.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007201444648.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007224706942.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007224740405.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007230307024.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007230337834.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161543418.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161606544.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161636295.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008171720795.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174245306.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174650025.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174716008.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174807852.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008175218275.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092646055.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092750116.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092951716.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011094430521.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095013063.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095230435.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095735902.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100141917.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100854637.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100921420.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100946663.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101012435.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101059251.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101126571.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104645983.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104914496.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104957732.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105019779.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105124751.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105150779.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111048853.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111115322.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111333235.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110953590.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110932014.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110717809.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110748963.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110812053.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110434019.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110512566.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110607474.png"><meta property="article:published_time" content="2021-10-04T13:28:12.000Z"><meta property="article:modified_time" content="2022-06-18T11:57:14.045Z"><meta property="article:author" content="Yousazoe"><meta property="article:tag" content="Computer Graphics"><meta property="article:tag" content="Taichi"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/96128c71718411.5bcf14c1f04f0.png"><link rel="canonical" href="https://yousazoe.top/archives/ed318fdc.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"en"}</script><title>Taichi Introduction | Fl0w3r</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Fl0w3r" type="application/atom+xml"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Fl0w3r</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">carpe diem</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-address-card fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-paperclip fa-fw"></i>Links</a></li><li class="menu-item menu-item-photos"><a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>Photos</a></li><li class="menu-item menu-item-artitalk"><a href="/artitalk/" rel="section"><i class="fa fa-calendar fa-fw"></i>Artitalk</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-document"><a href="/docs/" rel="section"><i class="fas fa-book fa-fw"></i>Document</a></li><li class="menu-item menu-item-qexoadmin"><a href="https://blog-yousazoe-qexo.vercel.app/" rel="noopener" target="_blank"><i class="fa fa-database fa-fw"></i>QexoAdmin</a></li><li class="menu-item menu-item-gametracker"><a href="https://yousazoe.notion.site/yousazoe/b05999823bd14b57a7a6cd81fba1a1af?v=21c3398e0bdb429c9b8157b7bf12ff6a" rel="noopener" target="_blank"><i class="fas fa-trophy fa-fw"></i>GameTracker</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="https://yousazoe.top/archives/ed318fdc.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><meta itemprop="name" content="Yousazoe"><meta itemprop="description" content="done is better than perfect"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Fl0w3r"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Taichi Introduction</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-10-04 21:28:12" itemprop="dateCreated datePublished" datetime="2021-10-04T21:28:12+08:00">2021-10-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/%E5%A4%AA%E6%9E%81%E5%9B%BE%E5%BD%A2%E5%AD%A6-TaiChi-Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">太极图形学 (TaiChi Computer Graphics)</span></a> </span></span><span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Views: </span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="Symbols count in article"><span class="post-meta-item-icon"><i class="fas fa-pen"></i></span><span>11k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span>19 mins.</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/96128c71718411.5bcf14c1f04f0.png"></p><div align="center"><font size="3"><i><a target="_blank" rel="noopener" href="https://www.behance.net/gallery/71718411/Yin-Yang-Countdown?tracking_source=search_projects_recommended%7Ctaichi">Yin-Yang Countdown</a> by <a target="_blank" rel="noopener" href="https://www.behance.net/cheolhongkim">Cheolhong Kim</a></i></font></div><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>太极图形课会分成「太极」语言与计算机「图形学」两部分。前半部分主讲太极编程语言的基础语法，高级用法，以及调试和优化太极程序的方式。后半部分侧重于图形学知识，我们将以实践者的角度来聊一聊基于太极语言的渲染和仿真。</p><span id="more"></span><h3 id="课程导览"><a href="#课程导览" class="headerlink" title="课程导览"></a>课程导览</h3><p>本季课程将通过 <strong>太极图形科技</strong> 微信公众号、<a target="_blank" rel="noopener" href="https://space.bilibili.com/1779922645"><strong>太极图形</strong></a> bilibili账号，<a target="_blank" rel="noopener" href="https://www.zhihu.com/org/tai-ji-tu-xing"><strong>太极图形</strong></a> 知乎机构号进行直播。 课程直播时间为每周二晚7点（中秋顺延），答疑时间则为每周四晚7点，详细时间表如图所示。</p><table><thead><tr><th align="center">时间</th><th align="center">内容</th><th align="center">答疑安排</th></tr></thead><tbody><tr><td align="center">第00讲：09/14</td><td align="center">导览：什么是图形学？什么是太极？<a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/00_Intro.pdf">课件</a></td><td align="center">09/16</td></tr><tr><td align="center">第01讲：09/22</td><td align="center">Hello World：编写你的第一个太极程序 <a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/01_Taichi_Basis.pdf">课件</a></td><td align="center">09/23</td></tr><tr><td align="center">第02讲：09/28</td><td align="center">复用你的太极代码：元编程和面向对象编程 <a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/02%20Metaprogramming%20and%20OOP.pdf">课件</a></td><td align="center">09/30</td></tr><tr><td align="center">第03讲：10/12</td><td align="center">大规模计算的关键：高级数据结构 <a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/03_advanced_data_layouts.pdf">课件</a></td><td align="center">10/14</td></tr><tr><td align="center">第04讲：10/19</td><td align="center">调试和优化你的太极程序 <a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/04_sm_debuge_optimization.pdf">课件</a></td><td align="center">10/21</td></tr><tr><td align="center">第05讲：10/26</td><td align="center">程序动画：生成你的第一个二维动画 <a target="_blank" rel="noopener" href="https://github.com/taichiCourse01/taichiCourse01/blob/main/material/05_procedural_animation.pdf">课件</a></td><td align="center">10/28</td></tr><tr><td align="center">第06讲：11/02</td><td align="center">渲染01：光线追踪概念和基础</td><td align="center">11/04</td></tr><tr><td align="center">第07讲：11/09</td><td align="center">渲染02：光线追踪实战</td><td align="center">11/11</td></tr><tr><td align="center">第08讲：11/16</td><td align="center">弹性物体仿真01：时间和空间离散化</td><td align="center">11/18</td></tr><tr><td align="center">第09讲：11/23</td><td align="center">弹性物体仿真02：隐式积分和数值解法</td><td align="center">11/25</td></tr><tr><td align="center">第10讲：11/30</td><td align="center">流体仿真01：拉格朗日视角</td><td align="center">12/02</td></tr><tr><td align="center">第11讲：12/07</td><td align="center">流体仿真02：欧拉视角</td><td align="center">12/09</td></tr><tr><td align="center">第12讲：12/14</td><td align="center">神秘嘉宾客串：从太极的使用者变成太极的贡献者</td><td align="center"></td></tr></tbody></table><p>【<strong>课时</strong>】：共安排13节讲堂及12节答疑，每节课约45分钟。</p><p>【<strong>授课形式</strong>】：中文授课，英文课件。当日直播，次日于 <a target="_blank" rel="noopener" href="https://space.bilibili.com/1779922645">太极图形</a> bilibili账号发布课程录播。（由于B站审核时间的问题，请同学们耐心地常刷常新～）</p><p>【<strong>课程需求</strong>】：了解Python基础语法，有线性代数和高中物理知识更佳。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004214556740.png"></p><h4 id="Instructor"><a href="#Instructor" class="headerlink" title="Instructor"></a>Instructor</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004214813110.png"></p><p>这门课的主讲人是刘天添老师，本科毕业于浙江大学，硕士和博士毕业于宾夕法尼亚大学。回国在微软亚洲研究所做了三年研究员，目前是太极图形的资深研究科学家，研究领域包括实时物理仿真、高性能几何处理和高效数值算法。</p><h4 id="Lead-Teaching-Assistant"><a href="#Lead-Teaching-Assistant" class="headerlink" title="Lead Teaching Assistant"></a>Lead Teaching Assistant</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004215714434.png"></p><h4 id="GAMES201"><a href="#GAMES201" class="headerlink" title="GAMES201"></a>GAMES201</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004215951646.png"></p><p>GAMES201是高级物理引擎实战指南2020，许多计算机图形学的华人老师都活跃在GAMES论坛中，开设课程涵盖渲染、仿真、几何、三维视觉等各个领域的内容，欢迎学有余力的同学按需求学习。</p><h4 id="The-Taichi-Graphics-Course-S1"><a href="#The-Taichi-Graphics-Course-S1" class="headerlink" title="The Taichi Graphics Course - S1"></a>The Taichi Graphics Course - S1</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004221559912.png"></p><p>去年GAMES201胡渊鸣教授的口号是“下接地气上不封顶，适合 0 到 99 岁人群适量学习”，所以刘老师想把宣传语改为“有手就行”，但转念一想过度宣传课程的简单容易增加学习者的沮丧感，还有凡尔赛之嫌，所以就不这么说了。总之今年会从基础讲起，争取做到手把手入门太极和计算机图形学。</p><h4 id="Homework-and-Final-Project"><a href="#Homework-and-Final-Project" class="headerlink" title="Homework and Final Project"></a>Homework and Final Project</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004223953449.png"></p><p>每一节课的课下作业是可选的，在 Taichi Zoo 也可以运行自己的小作业。</p><p>最后的大作业不定题材，只要是用太极写的图形学程序我们都认可。如果想要一份结业证书，大作业是必须上交的，截稿日期是2022年1月3日，上交方式以开源平台为主。</p><h4 id="Where-shall-I-raise-questions"><a href="#Where-shall-I-raise-questions" class="headerlink" title="Where shall I raise questions?"></a>Where shall I raise questions?</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211004224600321.png"></p><h3 id="什么是计算机图形学"><a href="#什么是计算机图形学" class="headerlink" title="什么是计算机图形学"></a>什么是计算机图形学</h3><p>我们先来聊聊什么是计算机图形学。</p><h4 id="Me-amp-Computer-Graphics"><a href="#Me-amp-Computer-Graphics" class="headerlink" title="Me &amp; Computer Graphics"></a>Me &amp; Computer Graphics</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005153456003.png"></p><p>和许多人一样，老师接触计算机图形学是因为小时候非常喜欢玩游戏，想像李逍遥一样仗剑天涯。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005153917238.png"></p><p>而第一次听到 CG 这个名词是因为最终幻想的过场动画，当时的硬件基础还是算法都没办法去支持大规模高质量的图片。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005155312954.png"></p><p>本科学了一学期的 OpenGL，只能说是图形学的一部分，没有办法涵盖图形学的全部。所以太极图形课更多的是让大家认识图形学是什么样子的。</p><h4 id="The-Knowledge-Image-Cycle"><a href="#The-Knowledge-Image-Cycle" class="headerlink" title="The Knowledge-Image Cycle"></a>The Knowledge-Image Cycle</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005161737629.png"></p><p>这边有一个知识-图片的循环，很多时候被人描述计算机图形学和计算机视觉的不同。计算机视觉更多是用来如何去理解图片，知道这张图片哪里是车哪里有标牌等等；而计算机图形学则更多是用计算机生成人也难以分辨的图片，它的“G”是用来生成的：</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170259428.png"></p><h4 id="The-G-in-Graphics-is-for-Generation"><a href="#The-G-in-Graphics-is-for-Generation" class="headerlink" title="The G in Graphics is for Generation!"></a>The G in Graphics is for Generation!</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170347686.png"></p><p>程序化的内容生成就是一种计算机图形学的表现方式，它的生成主要是用创造者给定的规则创造出创造者想要的数字内容，比如给树木设定一个生长的规则，最后可以长出形态各异的树。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170500849.png"></p><p>又或者说这些生成可以是基于物理的渲染方式，我们可以通过前人总结的物理公式来生成以假乱真的虚拟世界的图形。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170526423.png"></p><p>基于物理的动画也是如此。我们在虚拟世界可以生成一条可以扭动的龙，可以拖拽，它背后的原理也许只是牛顿运动定理而已。而根据这些物理原理，我们就可以用计算机图形学的知识来生成可以交互的动画。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170549660.png"></p><p>当然，用于生成的内容未必是人类能够理解的公式，它们也可以来自大数据。比如这张图片来自生成对抗网络，相片被用于生成很多不同画家风格的画，比如梵高、莫奈甚至是浮世绘风格，也可以看到计算机视觉与计算机图形学的界限越来越模糊，我认为所有用于生成数字资产的技术都可以被认为是图形学关心的技术。</p><h4 id="What-can-we-generate"><a href="#What-can-we-generate" class="headerlink" title="What can we generate?"></a>What can we generate?</h4><p>那我们都可以拿计算机图形学的工具来生成什么样的东西呢？</p><h5 id="We-generate-movies"><a href="#We-generate-movies" class="headerlink" title="We generate movies"></a>We generate movies</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170825913.png"></p><p>上图是动画电影《冰雪奇缘》，计算机图形学可以生成这些拥有丰富表现力的动画和特效。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170853534.png"></p><p>最近国内的动画电影也有非常大的进步，不管是哪吒还是白蛇青蛇，都是最近涌现的非常高质量的依托于计算机图形学技术制作的动画电影。</p><h5 id="We-generate-games"><a href="#We-generate-games" class="headerlink" title="We generate games"></a>We generate games</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005170958009.png"></p><p>除了电影，自然也有游戏。上面的截图来源于《黑神话：悟空》，是非常期待的国产游戏，预计2023年发布。游戏中除了很棒的实时渲染，还拥有非常多的物理交互，我可以破坏物体、看到毛发这些东西的二级运动以及和雪做交互等等，这些都极大提高了游戏的体验，让我们仿佛置身其中一样。</p><h5 id="We-generate-design-tools"><a href="#We-generate-design-tools" class="headerlink" title="We generate design tools"></a>We generate design tools</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171213741.png"></p><p>我们还能用图形学技术来制作生产工具。以往我们只认为机床、流水线或缝纫机才是生产工具，在当今智能制造生产流程当中，虚拟生产线也是非常重要的生产工具，上图是截取的一张凌迪科技的 Style3D 工具截图。</p><h5 id="We-generate-the-Reality-in-the-virtual-space"><a href="#We-generate-the-Reality-in-the-virtual-space" class="headerlink" title="We generate the Reality in the virtual space"></a>We generate the Reality in the virtual space</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171404179.png"></p><p>一定程度上所有的数字内容生成都是计算机图形学感兴趣的工作，所以你在虚拟世界中看得到摸得到感受得到的东西都会是计算机图形学生成和服务的对象。</p><h5 id="Maybe-ultimately…"><a href="#Maybe-ultimately…" class="headerlink" title="Maybe ultimately…"></a>Maybe ultimately…</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171437401.png"></p><p>那最终我们是不是可以迎来一个拥有超级丰富内容的虚拟世界呢？这幅图来自 2012 年非常火的动画片《刀剑神域》，该动画片中大部分精彩的故事都在虚拟世界中发生的。</p><h5 id="…-but-apparently-we-are-not-there-yet-Why"><a href="#…-but-apparently-we-are-not-there-yet-Why" class="headerlink" title="… but apparently we are not there yet. Why?"></a>… but apparently we are not there yet. Why?</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171503115.png"></p><p>首先是好用的工具不足。在虚拟数字内容的生成当中会需要使用非常多的工具，上面每一项工具都需要很长的时间去学习才能创作出满意的虚拟数字内容。我认为这些工具本身是非常棒的，但它们的学习曲线却非常陡峭，也许我们需要更加好用的数字内容生产工具，可以让人们生产出更多的数字内容。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211005171526887.png"></p><p>另一点是这些工具确实不是那么容易被生产的。一个是因为我们很难复现别人的代码，另一个是因为代码的计算效率非常依赖程序员的功底。</p><h3 id="什么是太极"><a href="#什么是太极" class="headerlink" title="什么是太极"></a>什么是太极</h3><h4 id="What-do-we-want-from-a-programming-language-for-computer-graphics"><a href="#What-do-we-want-from-a-programming-language-for-computer-graphics" class="headerlink" title="What do we want from a programming language for computer graphics?"></a>What do we want from a programming language for computer graphics?</h4><h5 id="Productivity"><a href="#Productivity" class="headerlink" title="Productivity"></a>Productivity</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006181822597.png"></p><p>大部分科研代码都是用 C++ 或者 CUDA 来写的，图中截取了一部分源代码，而一个约束的处理就达到了 1207 行，再包括用户交互所有代码可能要达到 1w+ 行。而在计算机图形学中，这种规模的代码并不是非常令人吃惊的东西，这就造成了要上手计算机图形学代码是一件非常难的事情，生产力被加上了非常多的制约。</p><h5 id="Portability"><a href="#Portability" class="headerlink" title="Portability"></a>Portability</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006181923921.png"></p><p>我们的硬件后端非常多，你可能希望自己的代码在 Intel 或 AppleM1 上可以跑起来，而这些设备通常有不同的指令集。在不同的操作系统上 Windows、MacOS 和 Linux 你的代码可能会以不同方式编译来支持这些指令集，比如在 Windows 的 Visual Studio 上写的代码很难在 Linux 上复现，开发者更喜欢 MacOS 和 Linux。</p><h5 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006182001712.png"></p><p>通常来说高效执行的语言比如 C++ 易读性和可维护性都不理想，会限制你的生产力。而脚本语言比如 Python 这样的工具非常好用，但很难被高效编译成想要的程序，Matlab 算是两者之间的折中，但还是很难满足计算机图形学实时计算的需求。</p><h4 id="Taichi-–-A-DSL-for-Computer-Graphics"><a href="#Taichi-–-A-DSL-for-Computer-Graphics" class="headerlink" title="Taichi – A DSL for Computer Graphics"></a>Taichi – A DSL for Computer Graphics</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184212725.png"></p><p>而太极就是为了高效的并行计算或图形计算而设计出的一种领域特定语言，它在生产力、可移植性做了非常好的优化。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184626978.png"></p><p>大家认识太极可能是源自胡渊鸣的 99 行《冰雪奇缘》帖子。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184808681.png"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211006184901515.png"></p><p>他的标题党在于《冰雪奇缘》不仅仅是一个 mpm 仿真程序而已，更多的是高质量虚拟内容的创作，仿真只是很小的一部分。这个程序麻雀虽小，五脏俱全，你可以去理解代码的逻辑。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172357423.png"></p><h4 id="What-you-can-do-using-Taichi"><a href="#What-you-can-do-using-Taichi" class="headerlink" title="What you can do using Taichi"></a>What you can do using Taichi</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172425164.png"></p><p>太极最初用于物理仿真，图中是基于物质点法的仿真程序，可以看到使用太极可以以比较少的代码行数去把整个仿真程序搞定。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007172503586.png"></p><p>太极还可以写渲染。一位来自 AMD 的产品经理表示太极非常好用，它可以成为 GPU 计算中的未来。</p><h3 id="如何安装-Taichi"><a href="#如何安装-Taichi" class="headerlink" title="如何安装 Taichi"></a>如何安装 Taichi</h3><h4 id="Taichi-Installation"><a href="#Taichi-Installation" class="headerlink" title="Taichi Installation"></a>Taichi Installation</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173036274.png"></p><p>太极的安装非常简单，无论什么开发环境都可以在 Python 下调用：</p><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">python3 -m pip install taichi</span><br></pre></td></tr></tbody></table></figure><h4 id="Taichi-Zoo"><a href="#Taichi-Zoo" class="headerlink" title="Taichi Zoo"></a>Taichi Zoo</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173100413.png"></p><p>如果本地没有 Python 环境或者说 <code>pip install</code> 有些问题，这里还可以使用 <a target="_blank" rel="noopener" href="https://zoo.taichi.graphics/">Taichi Zoo</a>：</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007175213793.png"></p><p>还可以修改默认的 Julia Set 代码体会：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init(arch=ti.gpu)</span><br><span class="line"></span><br><span class="line">n = <span class="number">640</span></span><br><span class="line">pixels = ti.field(dtype=<span class="built_in">float</span>, shape=(n, n))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.func</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">complex_sqr</span>(<span class="params">z</span>):</span><br><span class="line">    <span class="keyword">return</span> ti.Vector([z[<span class="number">0</span>]**<span class="number">2</span> - z[<span class="number">1</span>]**<span class="number">2</span>, z[<span class="number">1</span>] * z[<span class="number">0</span>] * <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paint</span>(<span class="params">t: <span class="built_in">float</span></span>):</span><br><span class="line">    <span class="keyword">for</span> i, j <span class="keyword">in</span> pixels:  <span class="comment"># Parallized over all pixels</span></span><br><span class="line">        <span class="comment"># c = ti.Vector([-0.8, ti.cos(t) * 0.2])</span></span><br><span class="line">        c = ti.Vector([ti.cos(t), ti.sin(t)]) * <span class="number">0.7885</span></span><br><span class="line">        z = ti.Vector([i / n - <span class="number">0.5</span>, j / n - <span class="number">0.5</span>]) * <span class="number">2</span></span><br><span class="line">        iterations = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> z.norm() &lt; <span class="number">20</span> <span class="keyword">and</span> iterations &lt; <span class="number">50</span>:</span><br><span class="line">            z = complex_sqr(z) + c</span><br><span class="line">            iterations += <span class="number">1</span></span><br><span class="line">        pixels[i, j] = <span class="number">1</span> - iterations * <span class="number">0.02</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gui = ti.GUI(<span class="string">"Julia Set"</span>, res=(n, n))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">    paint(i * <span class="number">0.01</span>)</span><br><span class="line">    gui.set_image(pixels)</span><br><span class="line">    gui.show()</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007180137581.png"></p><h4 id="Since-Zoo-is-still-in-BETA…"><a href="#Since-Zoo-is-still-in-BETA…" class="headerlink" title="Since Zoo is still in BETA…"></a>Since Zoo is still in BETA…</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007173126433.png"></p><p>目前 Zoo 还处于测试阶段，如果遇到意想不到的问题欢迎提 issues。</p><h4 id="Taichi-Documentation"><a href="#Taichi-Documentation" class="headerlink" title="Taichi Documentation"></a>Taichi Documentation</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007180825132.png"></p><p>太极文档放在 <a target="_blank" rel="noopener" href="https://docs.taichi.graphics/docs/">https://docs.taichi.graphics/docs/</a> 中，可以查阅各种 feature。</p><h3 id="初始化一个-Taichi-程序"><a href="#初始化一个-Taichi-程序" class="headerlink" title="初始化一个 Taichi 程序"></a>初始化一个 Taichi 程序</h3><h4 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Hello</span>():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"Hello World!"</span>)</span><br><span class="line">Hello()</span><br></pre></td></tr></tbody></table></figure><p>相信大家在很多语言课中第一节课都是在屏幕中打印出一个 “Hello World”。</p><h4 id="Hello-World-Taichi"><a href="#Hello-World-Taichi" class="headerlink" title="Hello World @ Taichi"></a>Hello World @ Taichi</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007201444648.png"></p><p>太极的 “Hello World” 可能稍微复杂一点：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(ti.gpu)</span><br><span class="line"></span><br><span class="line"><span class="comment"># global control</span></span><br><span class="line">paused = ti.field(ti.i32, ())</span><br><span class="line"></span><br><span class="line"><span class="comment"># gravitational constant 6.67408e-11, using 1 for simplicity</span></span><br><span class="line">G = <span class="number">1</span></span><br><span class="line">PI = <span class="number">3.141592653</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># number of planets</span></span><br><span class="line">N = <span class="number">1000</span></span><br><span class="line"><span class="comment"># unit mass</span></span><br><span class="line">m = <span class="number">5</span></span><br><span class="line"><span class="comment"># galaxy size</span></span><br><span class="line">galaxy_size = <span class="number">0.4</span></span><br><span class="line"><span class="comment"># planet radius (for rendering)</span></span><br><span class="line">planet_radius = <span class="number">2</span></span><br><span class="line"><span class="comment"># init vel</span></span><br><span class="line">init_vel = <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># time-step size</span></span><br><span class="line">h = <span class="number">1e-5</span></span><br><span class="line"><span class="comment"># substepping</span></span><br><span class="line">substepping = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pos, vel and force of the planets</span></span><br><span class="line"><span class="comment"># Nx2 vectors</span></span><br><span class="line">pos = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br><span class="line">vel = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br><span class="line">force = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>():</span><br><span class="line">    center=ti.Vector([<span class="number">0.5</span>, <span class="number">0.5</span>])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        theta = ti.random() * <span class="number">2</span> * PI</span><br><span class="line">        r = (ti.sqrt(ti.random()) * <span class="number">0.7</span> + <span class="number">0.3</span>) * galaxy_size</span><br><span class="line">        offset = r * ti.Vector([ti.cos(theta), ti.sin(theta)])</span><br><span class="line">        pos[i] = center+offset</span><br><span class="line">        vel[i] = [-offset.y, offset.x]</span><br><span class="line">        vel[i] *= init_vel</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_force</span>():</span><br><span class="line"></span><br><span class="line">    <span class="comment"># clear force</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        force[i] = ti.Vector([<span class="number">0.0</span>, <span class="number">0.0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute gravitational force</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        p = pos[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i): <span class="comment"># bad memory footprint and load balance, but better CPU performance</span></span><br><span class="line">            diff = p-pos[j]</span><br><span class="line">            r = diff.norm(<span class="number">1e-5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># gravitational force -(GMm / r^2) * (diff/r) for i</span></span><br><span class="line">            f = -G * m * m * (<span class="number">1.0</span>/r)**<span class="number">3</span> * diff</span><br><span class="line"></span><br><span class="line">            <span class="comment"># assign to each particle</span></span><br><span class="line">            force[i] += f</span><br><span class="line">            force[j] += -f</span><br><span class="line">        <span class="comment"># for j in range(N):# double the computation for a better memory footprint and load balance</span></span><br><span class="line">        <span class="comment">#     if i != j: </span></span><br><span class="line">        <span class="comment">#         diff = p-pos[j]</span></span><br><span class="line">        <span class="comment">#         r = diff.norm(1e-5)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#         # gravitational force -(GMm / r^2) * (diff/r) for i</span></span><br><span class="line">        <span class="comment">#         f = -G * m * m * (1.0/r)**3 * diff</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#         # assign to each particle</span></span><br><span class="line">        <span class="comment">#         force[i] += f</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>():</span><br><span class="line">    dt = h/substepping</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        <span class="comment">#symplectic euler</span></span><br><span class="line">        vel[i] += dt*force[i]/m</span><br><span class="line">        pos[i] += dt*vel[i]</span><br><span class="line"></span><br><span class="line">gui = ti.GUI(<span class="string">'N-body problem'</span>, (<span class="number">512</span>, <span class="number">512</span>))</span><br><span class="line"></span><br><span class="line">initialize()</span><br><span class="line"><span class="keyword">while</span> gui.running:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(substepping):</span><br><span class="line">        compute_force()</span><br><span class="line">        update()</span><br><span class="line"></span><br><span class="line">    gui.clear(<span class="number">0x112F41</span>)</span><br><span class="line">    gui.circles(pos.to_numpy(), color=<span class="number">0xffffff</span>, radius=planet_radius)</span><br><span class="line">    gui.show()</span><br></pre></td></tr></tbody></table></figure><h4 id="Build-your-first-project…"><a href="#Build-your-first-project…" class="headerlink" title="Build your first project…"></a>Build your first project…</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007224706942.png"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007224740405.png"></p><h4 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h4><h5 id="import-taichi-as-ti"><a href="#import-taichi-as-ti" class="headerlink" title="import taichi as ti"></a>import taichi as ti</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007230307024.png"></p><p>在所有太极程序中，都必须有这两段入口代码：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init(arch = ti.gpu)</span><br></pre></td></tr></tbody></table></figure><h5 id="ti-init"><a href="#ti-init" class="headerlink" title="ti.init()"></a>ti.init()</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211007230337834.png"></p><p><code>ti.init()</code> 是所有太极程序的入口，最重要的参数是 <code>arch</code> 的计算硬件是什么：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arch = ti.cpu / ti.gpu / ti.arm / ti.x64 / ti.cuda...</span><br></pre></td></tr></tbody></table></figure><p>当设备没有 gpu 时会回滚到 cpu 执行。</p><h4 id="Taichi-v-s-Python"><a href="#Taichi-v-s-Python" class="headerlink" title="Taichi v.s. Python"></a>Taichi v.s. Python</h4><h5 id="The-Python-frontend-of-Taichi"><a href="#The-Python-frontend-of-Taichi" class="headerlink" title="The Python frontend of Taichi"></a>The Python frontend of Taichi</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161543418.png"></p><p>可以看到这段代码中只有 <code>@ti.kernel</code> 是在太极作用域，剩下都是 Python 作用域。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(arch = ti.gpu)</span><br><span class="line"></span><br><span class="line">d = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	d_python = d</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"d_python = "</span>, d_python)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">	d_taichi = d</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"d_taichi = "</span>, d_taichi)</span><br><span class="line"></span><br><span class="line">d = d + <span class="number">1</span> <span class="comment"># d = 2</span></span><br><span class="line">foo()	  <span class="comment"># d_python = 2</span></span><br><span class="line">bar()	  <span class="comment"># d_taichi = 2</span></span><br><span class="line">d = d + <span class="number">1</span> <span class="comment"># d = 3</span></span><br><span class="line">foo()	  <span class="comment"># d_python = 3</span></span><br><span class="line">bar()	  <span class="comment"># d_taichi = 2</span></span><br></pre></td></tr></tbody></table></figure><h5 id="Taichi-scope-v-s-Python-scope"><a href="#Taichi-scope-v-s-Python-scope" class="headerlink" title="Taichi-scope v.s. Python-scope"></a>Taichi-scope v.s. Python-scope</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161606544.png"></p><p>Python-scope 就是在代码里几乎所有东西。下面的代码虽然调用了太极，却没有任何需要处理的内容，所以与一般的 Python 一致：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(arch = ti.gpu)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"This is a normal python function"</span>)</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008161636295.png"></p><p>而当你开始写 <code>@ti.kernel</code> 太极计算核的时候才会被太极编译成高性能计算程序：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(arch = ti.cpu)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"This is now a Taichi kernel"</span>)</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></tbody></table></figure><h3 id="组织-Taichi-数据"><a href="#组织-Taichi-数据" class="headerlink" title="组织 Taichi 数据"></a>组织 Taichi 数据</h3><h4 id="Primitive-types"><a href="#Primitive-types" class="headerlink" title="Primitive types"></a>Primitive types</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008171720795.png"></p><p>太极拥有无/有符号的整型，也支持浮点型，默认类型都是 32 位。</p><p>对于不同的架构我们支持的类型也有所不同，在 CPU 和 CUDA 上我们支持所有的数据类型，但在 Metal 或 OpenGL 中仅支持部分数据类型。</p><h4 id="Default-types"><a href="#Default-types" class="headerlink" title="Default types"></a>Default types</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174245306.png"></p><p>可以通过 <code>ti.init()</code> 初始化中修改默认的数据类型：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">ti.init(default_fp = ti.f32) <span class="comment"># float = ti.f32</span></span><br><span class="line">ti.init(default_fp = ti.f64) <span class="comment"># float = ti.f64</span></span><br><span class="line"></span><br><span class="line">ti.init(default_ip = ti.i32) <span class="comment"># int = ti.i32</span></span><br><span class="line">ti.init(default_ip = ti.i64) <span class="comment"># int = ti.i64</span></span><br></pre></td></tr></tbody></table></figure><h4 id="Type-promotions"><a href="#Type-promotions" class="headerlink" title="Type promotions"></a>Type promotions</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174650025.png"></p><p>精度不同的类型计算，太极会把低精度的自动升级为高精度的类型。</p><h4 id="Type-Casts"><a href="#Type-Casts" class="headerlink" title="Type Casts"></a>Type Casts</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174716008.png"></p><p>太极还可以进行隐式转换，如果在太极作用域中浮点型会被转变为整型。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008174807852.png"></p><p>显式转换使用 <code>ti.cast()</code> 把不同类型之间的数据做转换。</p><h4 id="Compound-types"><a href="#Compound-types" class="headerlink" title="Compound types"></a>Compound types</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211008175218275.png"></p><p>之前这些都是基础的标量数据格式，在太极作用域中同样可以定义矢量。用户可以使用 <code>ti.types.</code> 来定义想要使用的容器结构，图中定义了向量、矩阵以及结构体。</p><p>当然，一些常用的数据类型太极已经定义好了，可以调用 <code>ti.Vector()</code>、<code>ti.Matrix()</code> 等等。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092646055.png"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092750116.png"></p><p>可以使用 <code>[]</code> 去访问这些向量、矩阵结构中每一个 index 元素。</p><h4 id="ti-field"><a href="#ti-field" class="headerlink" title="ti.field"></a>ti.field</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011092951716.png"></p><p>太极与其他计算语言不同的是这个 <code>ti.field</code>，这边展示出一个示例：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">heat_field = ti.field(dtype=ti.f32, shape=(<span class="number">256</span>, <span class="number">256</span>))</span><br></pre></td></tr></tbody></table></figure><p>假如现在有一个方形的平底锅，大小是 256 x 256。锅上任意一点都会有温度，我想定义一个温度场表达每一点的温度是什么，就可以使用 <code>ti.field</code>，大小由 <code>shape</code> 定义，数据类型由 <code>dtype</code> 定义。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011094430521.png"></p><p>它是一个 N 维数组，当 N 为 0 时为标量；当 N 为 1 时为向量；当 N 为 2 时为矩阵。</p><h4 id="ti-field-examples"><a href="#ti-field-examples" class="headerlink" title="ti.field examples"></a>ti.field examples</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095013063.png"></p><h4 id="Example-N-body"><a href="#Example-N-body" class="headerlink" title="Example: N-body"></a>Example: N-body</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095230435.png"></p><p>这是之前说的 “Hello World” 的 N 体系统源码中数据声明与定义部分：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(ti.gpu)</span><br><span class="line"></span><br><span class="line"><span class="comment"># global control</span></span><br><span class="line">paused = ti.field(ti.i32, ())</span><br><span class="line"></span><br><span class="line"><span class="comment"># gravitational constant 6.67408e-11, using 1 for simplicity</span></span><br><span class="line">G = <span class="number">1</span></span><br><span class="line">PI = <span class="number">3.141592653</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># number of planets</span></span><br><span class="line">N = <span class="number">1000</span></span><br><span class="line"><span class="comment"># unit mass</span></span><br><span class="line">m = <span class="number">5</span></span><br><span class="line"><span class="comment"># galaxy size</span></span><br><span class="line">galaxy_size = <span class="number">0.4</span></span><br><span class="line"><span class="comment"># planet radius (for rendering)</span></span><br><span class="line">planet_radius = <span class="number">2</span></span><br><span class="line"><span class="comment"># init vel</span></span><br><span class="line">init_vel = <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># time-step size</span></span><br><span class="line">h = <span class="number">1e-5</span></span><br><span class="line"><span class="comment"># substepping</span></span><br><span class="line">substepping = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pos, vel and force of the planets</span></span><br><span class="line"><span class="comment"># Nx2 vectors</span></span><br><span class="line">pos = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br><span class="line">vel = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br><span class="line">force = ti.Vector.field(<span class="number">2</span>, ti.f32, N)</span><br></pre></td></tr></tbody></table></figure><h3 id="了解-Taichi-的计算核"><a href="#了解-Taichi-的计算核" class="headerlink" title="了解 Taichi 的计算核"></a>了解 Taichi 的计算核</h3><h4 id="Kernels"><a href="#Kernels" class="headerlink" title="Kernels"></a>Kernels</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011095735902.png"></p><p><code>@ti.kernel</code> 是太极的计算核，修饰的函数可以被 Python 作用域所调用。需要注意的是不可以在一个 <code>@ti.kernel</code> 中再调用另一个 <code>@ti.kernel</code> 函数，这样会直接报错。</p><h5 id="For-loops-in-a-ti-kernel"><a href="#For-loops-in-a-ti-kernel" class="headerlink" title="For-loops in a @ti.kernel"></a>For-loops in a @ti.kernel</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100141917.png"></p><p>我们为什么要使用太极计算核呢？因为计算核的效率要比传统的 Python 要快得多，并且当你被检测到你的程序是在并行化环境中运行时候，<code>for</code> 循环的最外层会被自动并行化：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fill</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):	<span class="comment"># Parallelized</span></span><br><span class="line">		x[i] += i</span><br><span class="line">		</span><br><span class="line">		s = <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):	<span class="comment"># Serialized in each parallel thread</span></span><br><span class="line">			s += j</span><br><span class="line">		</span><br><span class="line">		y[i] = s</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):	<span class="comment"># Parallelized</span></span><br><span class="line">		z[k] = k</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100854637.png"></p><p>最外层不单单只循环层，也包括一些条件跳转层：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init(arch=ti.cpu)</span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">k: ti.i32</span>):</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>): <span class="comment"># Parallelized :-)</span></span><br><span class="line">		<span class="keyword">if</span> k &gt; <span class="number">42</span>:</span><br><span class="line">			...</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">k: ti.i32</span>):</span><br><span class="line">	<span class="keyword">if</span> k &gt; <span class="number">42</span>:</span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>): <span class="comment"># Serial :-(</span></span><br><span class="line">			...</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100921420.png"></p><p>这时候就需要好好设计一下你的程序了，我们想要最大化去优化最外层的可并行性：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_for_loop</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):	 <span class="comment"># I don't want to parallelize this for</span></span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):  <span class="comment"># I want to parallelize this for</span></span><br><span class="line">			...</span><br><span class="line">my_for_loop()			</span><br></pre></td></tr></tbody></table></figure><p>此时我们想要并行里层循环，可以选择把里层逻辑写到 Python scope，就像写一个 CUDA kernel 一样：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_for_loop</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">		my_taichi_for()</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_taichi_for</span>()</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">		...</span><br><span class="line"></span><br><span class="line">my_for_loop();</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011100946663.png"></p><p>既然 <code>@ti.kernel</code> 会被并行执行，那么一些在 <code>for</code> 中正常使用的语句在最外层就不可以被调用了：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">		...</span><br><span class="line">		<span class="keyword">break</span>  <span class="comment"># Error!</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">			...</span><br><span class="line">			<span class="keyword">break</span>  <span class="comment"># OK!</span></span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101012435.png"></p><p>并行还带来占用问题，太极中的 <code>+=</code> 是原子操作：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>():</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">		<span class="comment"># 1. OK</span></span><br><span class="line">		total[<span class="literal">None</span>] += x[i]</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 2. OK</span></span><br><span class="line">		ti.atomic_add(total[<span class="literal">None</span>], x[i])</span><br><span class="line"></span><br><span class="line">		<span class="comment"># 3. data race</span></span><br><span class="line">		total[<span class="literal">None</span>] = total[<span class="literal">None</span>] + x[i]</span><br></pre></td></tr></tbody></table></figure><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101059251.png"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011101126571.png"></p><p>struct-for 可以遍历 <code>ti.field</code>，但仅支持最外层。</p><h5 id="Kernel-arguments"><a href="#Kernel-arguments" class="headerlink" title="Kernel arguments"></a>Kernel arguments</h5><ul><li>At most 8 parameters</li><li>Pass from the Python scope to the Taichi scope</li><li>Must be type-hinted</li><li>Scalar Only</li><li>Pass by value</li></ul><h5 id="Return-value-of-a-ti-kernel"><a href="#Return-value-of-a-ti-kernel" class="headerlink" title="Return value of a @ti.kernel"></a>Return value of a @ti.kernel</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104645983.png"></p><p>传参中只能返回一个标量，并且必须表明数据类型。</p><h4 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104914496.png"></p><p><code>@ti.func</code> 代表太极所有的 function，它和 <code>@ti.kernel</code> 最大的不同是它只能从 <code>@ti.kernel</code> 中被调用。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011104957732.png"></p><p>该功能主要是帮助复用代码。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105019779.png"></p><p><code>@ti.func</code> 可以嵌 <code>@ti.func</code>，在目前的实现中是强制内联的，所以函数目前不支持递归。</p><h5 id="Arguments-and-return-values"><a href="#Arguments-and-return-values" class="headerlink" title="Arguments and return values"></a>Arguments and return values</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105124751.png"></p><p>因为 <code>@ti.func</code> 是从 Taichi-scope 中调进来的，所以我们不需要知道传的参数是什么东西，太极程序已经知道它们是什么了。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011105150779.png"></p><p>需要注意的是为了保持程序传参的一致性，我们专门做了一次拷贝。</p><h5 id="Anything-in-ti-kernel-and-ti-func-are-in-the-Taichi-scope"><a href="#Anything-in-ti-kernel-and-ti-func-are-in-the-Taichi-scope" class="headerlink" title="Anything in @ti.kernel and @ti.func are in the Taichi scope"></a>Anything in @ti.kernel and @ti.func are in the Taichi scope</h5><ul><li><strong>Static</strong> data type in the Taichi scope</li><li><strong>Static</strong> lexical scope in the Taichi scope</li></ul><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111048853.png"></p><p>太极中数据是静态的，上图整型和向量没有隐式转换的方式，所以编译器会报错。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111115322.png"></p><p>太极的词法作用域也是静态的，这个和我们常写的 Python 程序可能会有区别，上面的 <code>y</code> 只作用于跳转语句，出去之后就被释放掉了。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011111333235.png"></p><p>左边的 <code>a</code> 不是全局的，所以变动后 <code>@ti.kernel</code> 并不知道变动。如果需要这样的全局变量，请设置 <code>ti.field</code>。</p><h5 id="Math-ops"><a href="#Math-ops" class="headerlink" title="Math ops"></a>Math ops</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110953590.png"></p><p>太极支持大多数 Python 的数学运算，包括矩阵的转置、求逆等等。</p><h5 id="Example-N-body-1"><a href="#Example-N-body-1" class="headerlink" title="Example: N-body"></a>Example: N-body</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110932014.png"></p><h3 id="可视化你的-Taichi-程序"><a href="#可视化你的-Taichi-程序" class="headerlink" title="可视化你的 Taichi 程序"></a>可视化你的 Taichi 程序</h3><h4 id="Print"><a href="#Print" class="headerlink" title="Print"></a>Print</h4><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110717809.png"></p><h5 id="Print-in-a-ti-kernel-for-the-GPU-backend"><a href="#Print-in-a-ti-kernel-for-the-GPU-backend" class="headerlink" title="Print in a @ti.kernel for the GPU backend"></a>Print in a @ti.kernel for the GPU backend</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110748963.png"></p><p>因为最外层的 <code>for</code> 是 GPU 并行处理的，所以打印出来的东西并不是按序的（除非在 CPU 环境下）。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110812053.png"></p><p>打印的时间也不一定和你想像的时间一样。</p><h4 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h4><p>太极目前提供了一套比较简单的可视化交互系统。</p><h5 id="2D"><a href="#2D" class="headerlink" title="2D"></a>2D</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110434019.png"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110512566.png"></p><h5 id="3D"><a href="#3D" class="headerlink" title="3D"></a>3D</h5><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20211011110607474.png"></p></div><div class="popular-posts-header">Related Posts</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/781b26a.html" rel="bookmark">如何用很短的代码创造「秋日氛围感」？</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/23737e0e.html" rel="bookmark">Rendering Basics of Ray Tracing</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/3bb16584.html" rel="bookmark">Advanced Data Layouts</a></div></li></ul><footer class="post-footer"><div class="post-tags"><a href="/tags/Computer-Graphics/" rel="tag"># Computer Graphics</a> <a href="/tags/Taichi/" rel="tag"># Taichi</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/17b5358a.html" rel="prev" title="C4编译器复现：CmmCompiler"><i class="fa fa-chevron-left"></i> C4编译器复现：CmmCompiler</a></div><div class="post-nav-item"><a href="/archives/1a46bbd3.html" rel="next" title="LD49游戏开发笔记：Deepwell Safety Inc.">LD49游戏开发笔记：Deepwell Safety Inc. <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E5%AF%BC%E8%A7%88"><span class="nav-number">2.</span> <span class="nav-text">课程导览</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Instructor"><span class="nav-number">2.1.</span> <span class="nav-text">Instructor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Lead-Teaching-Assistant"><span class="nav-number">2.2.</span> <span class="nav-text">Lead Teaching Assistant</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GAMES201"><span class="nav-number">2.3.</span> <span class="nav-text">GAMES201</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-Taichi-Graphics-Course-S1"><span class="nav-number">2.4.</span> <span class="nav-text">The Taichi Graphics Course - S1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Homework-and-Final-Project"><span class="nav-number">2.5.</span> <span class="nav-text">Homework and Final Project</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Where-shall-I-raise-questions"><span class="nav-number">2.6.</span> <span class="nav-text">Where shall I raise questions?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6"><span class="nav-number">3.</span> <span class="nav-text">什么是计算机图形学</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Me-amp-Computer-Graphics"><span class="nav-number">3.1.</span> <span class="nav-text">Me &amp; Computer Graphics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-Knowledge-Image-Cycle"><span class="nav-number">3.2.</span> <span class="nav-text">The Knowledge-Image Cycle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-G-in-Graphics-is-for-Generation"><span class="nav-number">3.3.</span> <span class="nav-text">The G in Graphics is for Generation!</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#What-can-we-generate"><span class="nav-number">3.4.</span> <span class="nav-text">What can we generate?</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#We-generate-movies"><span class="nav-number">3.4.1.</span> <span class="nav-text">We generate movies</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#We-generate-games"><span class="nav-number">3.4.2.</span> <span class="nav-text">We generate games</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#We-generate-design-tools"><span class="nav-number">3.4.3.</span> <span class="nav-text">We generate design tools</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#We-generate-the-Reality-in-the-virtual-space"><span class="nav-number">3.4.4.</span> <span class="nav-text">We generate the Reality in the virtual space</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Maybe-ultimately%E2%80%A6"><span class="nav-number">3.4.5.</span> <span class="nav-text">Maybe ultimately…</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E2%80%A6-but-apparently-we-are-not-there-yet-Why"><span class="nav-number">3.4.6.</span> <span class="nav-text">… but apparently we are not there yet. Why?</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%AA%E6%9E%81"><span class="nav-number">4.</span> <span class="nav-text">什么是太极</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#What-do-we-want-from-a-programming-language-for-computer-graphics"><span class="nav-number">4.1.</span> <span class="nav-text">What do we want from a programming language for computer graphics?</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Productivity"><span class="nav-number">4.1.1.</span> <span class="nav-text">Productivity</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Portability"><span class="nav-number">4.1.2.</span> <span class="nav-text">Portability</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Performance"><span class="nav-number">4.1.3.</span> <span class="nav-text">Performance</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Taichi-%E2%80%93-A-DSL-for-Computer-Graphics"><span class="nav-number">4.2.</span> <span class="nav-text">Taichi – A DSL for Computer Graphics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#What-you-can-do-using-Taichi"><span class="nav-number">4.3.</span> <span class="nav-text">What you can do using Taichi</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85-Taichi"><span class="nav-number">5.</span> <span class="nav-text">如何安装 Taichi</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Taichi-Installation"><span class="nav-number">5.1.</span> <span class="nav-text">Taichi Installation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Taichi-Zoo"><span class="nav-number">5.2.</span> <span class="nav-text">Taichi Zoo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Since-Zoo-is-still-in-BETA%E2%80%A6"><span class="nav-number">5.3.</span> <span class="nav-text">Since Zoo is still in BETA…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Taichi-Documentation"><span class="nav-number">5.4.</span> <span class="nav-text">Taichi Documentation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA-Taichi-%E7%A8%8B%E5%BA%8F"><span class="nav-number">6.</span> <span class="nav-text">初始化一个 Taichi 程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Hello-World"><span class="nav-number">6.1.</span> <span class="nav-text">Hello World!</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hello-World-Taichi"><span class="nav-number">6.2.</span> <span class="nav-text">Hello World @ Taichi</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Build-your-first-project%E2%80%A6"><span class="nav-number">6.3.</span> <span class="nav-text">Build your first project…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Initialization"><span class="nav-number">6.4.</span> <span class="nav-text">Initialization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#import-taichi-as-ti"><span class="nav-number">6.4.1.</span> <span class="nav-text">import taichi as ti</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ti-init"><span class="nav-number">6.4.2.</span> <span class="nav-text">ti.init()</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Taichi-v-s-Python"><span class="nav-number">6.5.</span> <span class="nav-text">Taichi v.s. Python</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#The-Python-frontend-of-Taichi"><span class="nav-number">6.5.1.</span> <span class="nav-text">The Python frontend of Taichi</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Taichi-scope-v-s-Python-scope"><span class="nav-number">6.5.2.</span> <span class="nav-text">Taichi-scope v.s. Python-scope</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E7%BB%87-Taichi-%E6%95%B0%E6%8D%AE"><span class="nav-number">7.</span> <span class="nav-text">组织 Taichi 数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Primitive-types"><span class="nav-number">7.1.</span> <span class="nav-text">Primitive types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Default-types"><span class="nav-number">7.2.</span> <span class="nav-text">Default types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Type-promotions"><span class="nav-number">7.3.</span> <span class="nav-text">Type promotions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Type-Casts"><span class="nav-number">7.4.</span> <span class="nav-text">Type Casts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compound-types"><span class="nav-number">7.5.</span> <span class="nav-text">Compound types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ti-field"><span class="nav-number">7.6.</span> <span class="nav-text">ti.field</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ti-field-examples"><span class="nav-number">7.7.</span> <span class="nav-text">ti.field examples</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-N-body"><span class="nav-number">7.8.</span> <span class="nav-text">Example: N-body</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%86%E8%A7%A3-Taichi-%E7%9A%84%E8%AE%A1%E7%AE%97%E6%A0%B8"><span class="nav-number">8.</span> <span class="nav-text">了解 Taichi 的计算核</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Kernels"><span class="nav-number">8.1.</span> <span class="nav-text">Kernels</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#For-loops-in-a-ti-kernel"><span class="nav-number">8.1.1.</span> <span class="nav-text">For-loops in a @ti.kernel</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Kernel-arguments"><span class="nav-number">8.1.2.</span> <span class="nav-text">Kernel arguments</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Return-value-of-a-ti-kernel"><span class="nav-number">8.1.3.</span> <span class="nav-text">Return value of a @ti.kernel</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Functions"><span class="nav-number">8.2.</span> <span class="nav-text">Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Arguments-and-return-values"><span class="nav-number">8.2.1.</span> <span class="nav-text">Arguments and return values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Anything-in-ti-kernel-and-ti-func-are-in-the-Taichi-scope"><span class="nav-number">8.2.2.</span> <span class="nav-text">Anything in @ti.kernel and @ti.func are in the Taichi scope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Math-ops"><span class="nav-number">8.2.3.</span> <span class="nav-text">Math ops</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-N-body-1"><span class="nav-number">8.2.4.</span> <span class="nav-text">Example: N-body</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E4%BD%A0%E7%9A%84-Taichi-%E7%A8%8B%E5%BA%8F"><span class="nav-number">9.</span> <span class="nav-text">可视化你的 Taichi 程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Print"><span class="nav-number">9.1.</span> <span class="nav-text">Print</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Print-in-a-ti-kernel-for-the-GPU-backend"><span class="nav-number">9.1.1.</span> <span class="nav-text">Print in a @ti.kernel for the GPU backend</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GUI"><span class="nav-number">9.2.</span> <span class="nav-text">GUI</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2D"><span class="nav-number">9.2.1.</span> <span class="nav-text">2D</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3D"><span class="nav-number">9.2.2.</span> <span class="nav-text">3D</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Yousazoe" src="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><p class="site-author-name" itemprop="name">Yousazoe</p><div class="site-description" itemprop="description">done is better than perfect</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">273</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:zoeyousa@gmail.com" title="E-Mail → mailto:zoeyousa@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://github.com/Yousazoe" title="GitHub → https://github.com/Yousazoe" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://twitter.com/YousaZoe" title="Twitter → https://twitter.com/YousaZoe" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" title="Weibo → https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://steamcommunity.com/profiles/76561198856466228/" title="Steam → https://steamcommunity.com/profiles/76561198856466228/" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.chess.com/member/yousazoe" title="Chess → https://www.chess.com/member/yousazoe" rel="noopener" target="_blank"><i class="fa fa-chess-pawn fa-fw"></i></a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="./image/loading.gif" data-original="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="cc-license animated" itemprop="sponsor"><span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="./image/loading.gif" data-original="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="translate-style">繁/简：<a id="translateLink" href="javascript:translatePage();">繁体</a></div><script type="text/javascript" src="/js/tw_cn.js"></script><script type="text/javascript">var defaultEncoding=2,translateDelay=0,cookieDomain="https://tding.top/",msgToTraditionalChinese="繁体",msgToSimplifiedChinese="简体",translateButtonId="translateLink";translateInitilization()</script><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">晋ICP备2021009930号 </a><img src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/备案图标.png" style="display:inline-block"></div><div class="copyright">© 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Yousazoe</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="Symbols count total">4.1m</span></div><div class="powered-by">今早雾霾蔽日，但是不要害怕，太阳依旧在云端</div><div class="busuanzi-count"><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//fastly.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="//fastly.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="//fastly.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
    $(document).ready(function () {

    if(location.href.indexOf("#reloaded")==-1){
        location.href=location.href+"#reloaded";
        location.reload();
    }
}）
#在这后面可以加入程序的其他代码  


  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });

  
  NexT.boot.refresh();
  
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  
  NexT.utils.updateSidebarPosition();
});</script><script defer="" src="/lib/three/three.min.js"></script><script defer="" src="//fastly.jsdelivr.net/gh/bynotes/texiao/source/js/caidai.js"></script><script data-pjax="">!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script data-pjax="">document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),r=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script data-pjax="">document.querySelectorAll("pre.mermaid").length&&NexT.utils.getScript("//fastly.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js",()=>{mermaid.initialize({theme:"forest",logLevel:3,flowchart:{curve:"linear"},gantt:{axisFormat:"%m/%d/%Y"},sequence:{actorMargin:50}})},window.mermaid)</script><div id="pjax"></div><script type="text/javascript" src="/js/cursor/fireworks.js"></script><script async="" src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script>!function(t,h,e,j){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2272201,hjsv:6},e=h.getElementsByTagName("head")[0],(j=h.createElement("script")).async=1,j.src="https://static.hotjar.com/c/hotjar-"+t._hjSettings.hjid+".js?sv="+t._hjSettings.hjsv,e.appendChild(j)}(window,document)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"live2d-widget-model-hijiki"},display:{position:"right",width:100,height:200},mobile:{show:!0},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:3,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>