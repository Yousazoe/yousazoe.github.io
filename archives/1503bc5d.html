<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="mask-icon" href="/images/favicon.ico" color="#222"><meta name="baidu-site-verification" content="slBbq5f8WxljPytW"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="//fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"><link rel="stylesheet" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"yousazoe.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!0,comments:{style:"tabs",active:null,storage:!0,lazyload:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:3,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="引言 本节我们将应用 Falcor 的色调映射器以显示高动态范围输出"><meta property="og:type" content="article"><meta property="og:title" content="A Gentle Introduction to DirectX Raytracing 13"><meta property="og:url" content="https://yousazoe.top/archives/1503bc5d.html"><meta property="og:site_name" content="Fl0w3r"><meta property="og:description" content="引言 本节我们将应用 Falcor 的色调映射器以显示高动态范围输出"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/Tutor13-Output.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/Tutor13-Output-20220129154512497.png"><meta property="article:published_time" content="2022-01-29T07:40:19.000Z"><meta property="article:modified_time" content="2022-06-12T09:50:28.394Z"><meta property="article:author" content="Yousazoe"><meta property="article:tag" content="Computer Graphics"><meta property="article:tag" content="Ray Tracing"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/Tutor13-Output.png"><link rel="canonical" href="https://yousazoe.top/archives/1503bc5d.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"en"}</script><title>A Gentle Introduction to DirectX Raytracing 13 | Fl0w3r</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Fl0w3r" type="application/atom+xml"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Fl0w3r</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">carpe diem</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-address-card fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-paperclip fa-fw"></i>Links</a></li><li class="menu-item menu-item-photos"><a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>Photos</a></li><li class="menu-item menu-item-artitalk"><a href="/artitalk/" rel="section"><i class="fa fa-calendar fa-fw"></i>Artitalk</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-document"><a href="/docs/" rel="section"><i class="fas fa-book fa-fw"></i>Document</a></li><li class="menu-item menu-item-gametracker"><a href="https://yousazoe.notion.site/yousazoe/b05999823bd14b57a7a6cd81fba1a1af?v=21c3398e0bdb429c9b8157b7bf12ff6a" rel="noopener" target="_blank"><i class="fas fa-trophy fa-fw"></i>GameTracker</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="https://yousazoe.top/archives/1503bc5d.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><meta itemprop="name" content="Yousazoe"><meta itemprop="description" content="done is better than perfect"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Fl0w3r"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">A Gentle Introduction to DirectX Raytracing 13</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-01-29 15:40:19" itemprop="dateCreated datePublished" datetime="2022-01-29T15:40:19+08:00">2022-01-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA-Ray-Tracing/" itemprop="url" rel="index"><span itemprop="name">光线追踪 (Ray Tracing)</span></a> </span></span><span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Views: </span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="Symbols count in article"><span class="post-meta-item-icon"><i class="fas fa-pen"></i></span><span>5.2k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span>9 mins.</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/Tutor13-Output.png"></p><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>本节我们将应用 Falcor 的色调映射器以显示高动态范围输出</p><span id="more"></span><blockquote><p>In <a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor10/tutorial10.md.html">Tutorials 10</a> <a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor12/tutorial12.md.html">and 12</a>, we added high dynamic range environment maps and indirect illumination. With these two additions, we sometimes get renderngs that are perfectly correct but might be too dark or bright to clearly display on our monitors. As we add more complex materials (and, eventually, area lighting using actual measured light power) these problems quickly become worse.</p></blockquote><p>在<a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor10/tutorial10.md.html">教程 10</a> <a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor12/tutorial12.md.html">和 12</a>中，我们添加了高动态范围环境贴图和间接照明。通过这两个添加，我们有时会得到完全正确的渲染，但可能太暗或太亮而无法在我们的显示器上清晰显示。随着我们添加更复杂的材料（最终，使用实际测量的光功率进行区域照明），这些问题很快变得更糟。</p><blockquote><p>This tutorial takes a quick detour to add a pass to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tone_mapping">tone map</a> our rendered output. Tone mapping and high dynamic range imaging are widely studied areas. Rather than dive into details, I suggest you find a textbook on the topic (perhaps <a target="_blank" rel="noopener" href="https://www.elsevier.com/books/high-dynamic-range-imaging/reinhard/978-0-12-374914-7">this one</a>) for a guide on picking the right algorithm for your needs.</p></blockquote><p>本教程快速绕道，为我们渲染的输出添加一个传递到<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tone_mapping">色调映射的通道。</a>色调映射和高动态范围成像是广泛研究的领域。与其深入细节，我建议您查找有关该主题的教科书（可能是<a target="_blank" rel="noopener" href="https://www.elsevier.com/books/high-dynamic-range-imaging/reinhard/978-0-12-374914-7">这本</a>教科书），以获取有关根据您的需要选择正确算法的指南。</p><blockquote><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/falcor">Falcor</a> has a built-in tone mapping utility, and we are simply going to expose this utility in a new <code>SimpleToneMappingPass</code>.</p></blockquote><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/falcor">Falcor</a>有一个内置的色调映射实用程序，我们只是要在一个新的 <code>SimpleToneMappingPass</code>.</p><h3 id="A-Render-Pass-Leveraging-Falcor’s-Tone-Mapper"><a href="#A-Render-Pass-Leveraging-Falcor’s-Tone-Mapper" class="headerlink" title="A Render Pass Leveraging Falcor’s Tone Mapper"></a>A Render Pass Leveraging Falcor’s Tone Mapper</h3><blockquote><p>Unlike the last few tutorials, let’s start again from the beginning: the <code>main()</code> function in <code>Tutor13-SimpleToneMapping.cpp</code>. This this tutorial, we are adding a fourth render pass to out pipeline:</p></blockquote><p>与上几篇教程不同，让我们从头开始：<code>main()</code>. <code>Tutor13-SimpleToneMapping.cpp</code>在本教程中，我们将向输出管道添加第四个渲染通道：</p><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">pipeline-&gt;<span class="built_in">setPass</span>(<span class="number">0</span>, LightProbeGBufferPass::<span class="built_in">create</span>());</span><br><span class="line">pipeline-&gt;<span class="built_in">setPass</span>(<span class="number">1</span>, SimpleDiffuseGIPass::<span class="built_in">create</span>(<span class="string">"HDRColorOutput"</span>));       </span><br><span class="line">pipeline-&gt;<span class="built_in">setPass</span>(<span class="number">2</span>, SimpleAccumulationPass::<span class="built_in">create</span>(<span class="string">"HDRColorOutput"</span>));     </span><br><span class="line">pipeline-&gt;<span class="built_in">setPass</span>(<span class="number">3</span>, SimpleToneMappingPass::<span class="built_in">create</span>(<span class="string">"HDRColorOutput"</span>, </span><br><span class="line">                                            ResourceManager::kOutputChannel));</span><br></pre></td></tr></tbody></table></figure><blockquote><p>Here what we are doing is:</p><ul><li>Creating our G-buffer</li><li>Rendering our one-bounce diffuse global illumination into the <code>HDRColorOutput</code> texture</li><li>Temporally accumulating from and storing the accumualted result into <code>HDRColorOutput</code></li><li>Tone mapping the result from <code>HDRColorOutput</code> into our final output <code>kOutputChannel</code></li></ul></blockquote><p>我们正在做的是：</p><ul><li>创建我们的 G 缓冲区</li><li>将我们的单次反射漫反射全局照明渲染到 <code>HDRColorOutput</code> 纹理中</li><li>临时累加并将累加的结果存储到 <code>HDRColorOutput</code></li><li>将结果从色调映射 <code>HDRColorOutput</code> 到我们的最终输出 <code>kOutputChannel</code></li></ul><h3 id="Defining-the-Tone-Mapping-Render-Pass"><a href="#Defining-the-Tone-Mapping-Render-Pass" class="headerlink" title="Defining the Tone Mapping Render Pass"></a>Defining the Tone Mapping Render Pass</h3><blockquote><p>Our render pass definition in <code>SimpleToneMappingPass.h</code> is mostly boilerplate, with the key data being:</p></blockquote><p>我们的渲染通道定义 <code>SimpleToneMappingPass.h</code>，关键数据是：</p><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">std::string                 mInChannel;    <span class="comment">// Input texture for tonemapping</span></span><br><span class="line">std::string                 mOutChannel;   <span class="comment">// Output texure from tonemapping</span></span><br><span class="line">GraphicsState::SharedPtr    mpGfxState;    <span class="comment">// DirectX raster state </span></span><br><span class="line">ToneMapping::UniquePtr      mpToneMapper;  <span class="comment">// Falcor's tonemapping utility </span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>Here <code>mInputChannel</code> and <code>mOutputChannel</code> are input and output buffers, copied from the constructor (so based on the initialization in <code>main()</code>, these are <code>"HDRColorOutput"</code> and <code>kOutputChannel</code>).</p></blockquote><p>这里 <code>mInputChannel</code> 和 <code>mOutputChannel</code> 是输入和输出缓冲区，从构造函数复制（因此基于 中的初始化 <code>main()</code>，它们是 <code>"HDRColorOutput"</code> 和 <code>kOutputChannel</code>）。</p><blockquote><p><code>mpGfxState</code> is a default DirectX pipeline state, as we used in <a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor2/tutorial02.md.html">Tutorial 2</a>.</p></blockquote><p><code>mpGfxState</code> 是我们在<a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor2/tutorial02.md.html">教程 2</a>中使用的默认 DirectX 管道状态。</p><blockquote><p><code>mpToneMapper</code> is an instantiation of Falcor’s tone mapping utility class. There are a number of methods to configure the tonemapping, including <code>setOperator()</code>, <code>setExposureKey()</code>, etc. The tone mapper class also provides a GUI, so the user can configure the settings dynamically at run time.</p></blockquote><p><code>mpToneMapper</code>是 Falcor 的色调映射实用程序类的实例。配置色调映射的方法有很多，包括<code>setOperator()</code>、<code>setExposureKey()</code>等。色调映射器类还提供了一个 GUI，因此用户可以在运行时动态配置设置。</p><h3 id="Applying-our-Tone-Mapping"><a href="#Applying-our-Tone-Mapping" class="headerlink" title="Applying our Tone Mapping"></a>Applying our Tone Mapping</h3><blockquote><p>The key operations in <code>SimpleToneMappingPass::initialize()</code> include:</p></blockquote><p>关键操作 <code>SimpleToneMappingPass::initialize()</code> 包括：</p><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">mpToneMapper = ToneMapping::<span class="built_in">create</span>( ToneMapping::Operator::Clamp );</span><br><span class="line">mpGfxState   = GraphicsState::<span class="built_in">create</span>();</span><br></pre></td></tr></tbody></table></figure><blockquote><p>The first line instantiates the class and initializes it to use a clamping operator. The clamp operator does <strong>no</strong> tone mapping, essentially copying the input texture to the output. The second line initializes a default DirectX raster state (needed while tone mapping).</p></blockquote><p>第一行实例化该类并将其初始化为使用钳位运算符。钳位操作符不<strong>进行</strong>色调映射，本质上是将输入纹理复制到输出。第二行初始化默认的 DirectX 光栅状态（色调映射时需要）。</p><blockquote><p>To perform tone mapping, our <code>SimpleToneMappingPass::execute()</code> looks as follows:</p></blockquote><p>为了执行色调映射，我们 <code>SimpleToneMappingPass::execute()</code> 看起来如下：</p><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SimpleToneMappingPass::execute</span><span class="params">(RenderContext::SharedPtr pRenderContext)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  Fbo::SharedPtr srcFbo = mpResManager-&gt;<span class="built_in">createManagedFbo</span>({ mInChannel });</span><br><span class="line">  Fbo::SharedPtr dstFbo = mpResManager-&gt;<span class="built_in">createManagedFbo</span>({ mOutChannel });</span><br><span class="line"></span><br><span class="line">  pRenderContext-&gt;<span class="built_in">pushGraphicsState</span>(mpGfxState);</span><br><span class="line">  mpToneMapper-&gt;<span class="built_in">execute</span>(pRenderContext.<span class="built_in">get</span>(), srcFbo, dstFbo);</span><br><span class="line">  pRenderContext-&gt;<span class="built_in">popGraphicsState</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>The first two lines get our input and output buffers as frame buffer objects (as required by <code>mpToneMapper</code>). <code>mpToneMapper-&gt;execute()</code> performs tone mapping, and the <code>pushGraphicsState()</code> and <code>popGraphicsState()</code> ensure changes in the tone mapper don’t affect the rest of our program.</p></blockquote><p>前两行将我们的输入和输出缓冲区作为帧缓冲区对象（根据 要求 <code>mpToneMapper</code>）。 <code>mpToneMapper-&gt;execute()</code> 执行色调映射，<code>pushGraphicsState()</code> 和 <code>popGraphicsState()</code> 确保色调映射器中的更改不会影响我们程序的其余部分。</p><blockquote><p>One last observation: in order to expose the class parameters in the UI, we need to add <code>mpToneMapper-&gt;renderUI()</code> to our <code>renderGui()</code> method:</p></blockquote><p>最后一个观察：为了在 UI 中公开类参数，我们需要在 <code>mpToneMapper-&gt;renderUI()</code> 我们的 <code>renderGui()</code> 方法中添加：</p><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SimpleToneMappingPass::renderGui</span><span class="params">(Gui* pGui)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	mpToneMapper-&gt;<span class="built_in">renderUI</span>(pGui, <span class="literal">nullptr</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="What-Does-it-Look-Like"><a href="#What-Does-it-Look-Like" class="headerlink" title="What Does it Look Like?"></a>What Does it Look Like?</h3><blockquote><p>That covers the important points of this tutorial. When running, you get the following result:</p></blockquote><p>这涵盖了本教程的重点。运行时，您会得到以下结果：</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/Tutor13-Output-20220129154512497.png"></p><blockquote><p>With this tutorial, you can apply Falcor’s built-in tone mapping to allow rendering of very dark or very bright environments.</p></blockquote><p>通过本教程，您可以应用 Falcor 的内置色调映射来渲染非常黑暗或非常明亮的环境。</p><blockquote><p><a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor14/tutorial14.md.html">Tutorial 14</a> changes our Lambertian material model to use Falcor’s standard <a target="_blank" rel="noopener" href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf">GGX materials</a> and extends our one-bounce global illumination to an arbitrary, user-controllable number of bounces.</p></blockquote><p><a target="_blank" rel="noopener" href="http://cwyman.org/code/dxrTutors/tutors/Tutor14/tutorial14.md.html">教程 14</a>将我们的 Lambertian 材质模型更改为使用 Falcor 的标准<a target="_blank" rel="noopener" href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf">GGX 材质</a>，并将我们的单反射全局照明扩展到任意的、用户可控数量的反射。</p></div><div class="popular-posts-header">Related Posts</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/8b6729fe.html" rel="bookmark">A Gentle Introduction to DirectX Raytracing 14</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/62048ccb.html" rel="bookmark">A Gentle Introduction to DirectX Raytracing 12</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/fb0ddd71.html" rel="bookmark">A Gentle Introduction to DirectX Raytracing 11</a></div></li></ul><footer class="post-footer"><div class="post-tags"><a href="/tags/Computer-Graphics/" rel="tag"># Computer Graphics</a> <a href="/tags/Ray-Tracing/" rel="tag"># Ray Tracing</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/62048ccb.html" rel="prev" title="A Gentle Introduction to DirectX Raytracing 12"><i class="fa fa-chevron-left"></i> A Gentle Introduction to DirectX Raytracing 12</a></div><div class="post-nav-item"><a href="/archives/8ee92280.html" rel="next" title="《开端》，会是开端吗？">《开端》，会是开端吗？ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-Render-Pass-Leveraging-Falcor%E2%80%99s-Tone-Mapper"><span class="nav-number">2.</span> <span class="nav-text">A Render Pass Leveraging Falcor’s Tone Mapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-the-Tone-Mapping-Render-Pass"><span class="nav-number">3.</span> <span class="nav-text">Defining the Tone Mapping Render Pass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Applying-our-Tone-Mapping"><span class="nav-number">4.</span> <span class="nav-text">Applying our Tone Mapping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-Does-it-Look-Like"><span class="nav-number">5.</span> <span class="nav-text">What Does it Look Like?</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Yousazoe" src="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><p class="site-author-name" itemprop="name">Yousazoe</p><div class="site-description" itemprop="description">done is better than perfect</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">271</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:zoeyousa@gmail.com" title="E-Mail → mailto:zoeyousa@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://github.com/Yousazoe" title="GitHub → https://github.com/Yousazoe" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://twitter.com/YousaZoe" title="Twitter → https://twitter.com/YousaZoe" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" title="Weibo → https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://steamcommunity.com/profiles/76561198856466228/" title="Steam → https://steamcommunity.com/profiles/76561198856466228/" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.chess.com/member/yousazoe" title="Chess → https://www.chess.com/member/yousazoe" rel="noopener" target="_blank"><i class="fa fa-chess-pawn fa-fw"></i></a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="./image/loading.gif" data-original="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="cc-license animated" itemprop="sponsor"><span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="./image/loading.gif" data-original="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="translate-style">繁/简：<a id="translateLink" href="javascript:translatePage();">繁体</a></div><script type="text/javascript" src="/js/tw_cn.js"></script><script type="text/javascript">var defaultEncoding=2,translateDelay=0,cookieDomain="https://tding.top/",msgToTraditionalChinese="繁体",msgToSimplifiedChinese="简体",translateButtonId="translateLink";translateInitilization()</script><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">晋ICP备2021009930号 </a><img src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/备案图标.png" style="display:inline-block"></div><div class="copyright">© 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Yousazoe</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="Symbols count total">4m</span></div><div class="powered-by">今早雾霾蔽日，但是不要害怕，太阳依旧在云端</div><div class="busuanzi-count"><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//fastly.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="//fastly.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="//fastly.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
    $(document).ready(function () {

    if(location.href.indexOf("#reloaded")==-1){
        location.href=location.href+"#reloaded";
        location.reload();
    }
}）
#在这后面可以加入程序的其他代码  


  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });

  
  NexT.boot.refresh();
  
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  
  NexT.utils.updateSidebarPosition();
});</script><script data-pjax="">!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script data-pjax="">document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),r=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script data-pjax="">document.querySelectorAll("pre.mermaid").length&&NexT.utils.getScript("//cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js",()=>{mermaid.initialize({theme:"forest",logLevel:3,flowchart:{curve:"linear"},gantt:{axisFormat:"%m/%d/%Y"},sequence:{actorMargin:50}})},window.mermaid)</script><div id="pjax"></div><script type="text/javascript" src="/js/cursor/fireworks.js"></script><script async="" src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script>!function(t,h,e,j){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2272201,hjsv:6},e=h.getElementsByTagName("head")[0],(j=h.createElement("script")).async=1,j.src="https://static.hotjar.com/c/hotjar-"+t._hjSettings.hjid+".js?sv="+t._hjSettings.hjsv,e.appendChild(j)}(window,document)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"live2d-widget-model-hijiki"},display:{position:"right",width:100,height:200},mobile:{show:!0},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:3,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>