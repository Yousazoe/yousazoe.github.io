<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="mask-icon" href="/images/favicon.ico" color="#222"><meta name="baidu-site-verification" content="slBbq5f8WxljPytW"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/5.15.4/css/all.min.css"><link rel="stylesheet" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//unpkg.com/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//unpkg.com/pace-js@1.2.4/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"yousazoe.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!0,comments:{style:"tabs",active:null,storage:!0,lazyload:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:3,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta property="og:type" content="article"><meta property="og:title" content="利用蒙特卡洛法模拟竞技游戏玩家的天梯MMR分布"><meta property="og:url" content="https://yousazoe.top/archives/686af6ce.html"><meta property="og:site_name" content="Fl0w3r"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/4a41cd6b7b7ac0b833cb66f880f47f7b334c83cb.jpg"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/f56684c3a198fe5b31a42c2fdc9551dd43a1de37.png@587w_518h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/81def16c2e50de492940f3b702da81bf68d2bdc4.png@942w_461h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/186ac81d88d1896e1a94c1f986aa280762d86b91.png@942w_461h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/faa1235bfcb09de54a83a638e22db4758a9f40df.png@303w_474h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/02c2bc8db204760df396215326036c9129920142.png@942w_461h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/2ad365fdde525998ab849b87089a8cfcd1d7549a.png@942w_176h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/07425d5a6442eccbf05b13be944ce83abd7a9c1c.png@942w_461h_progressive.webp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/4a21549c8c7265e66dd0114bd20b0fcc7d3b6da0.png@942w_519h_progressive.webp"><meta property="article:published_time" content="2021-12-25T05:02:27.000Z"><meta property="article:modified_time" content="2022-07-07T03:53:03.771Z"><meta property="article:author" content="Yousazoe"><meta property="article:tag" content="Math"><meta property="article:tag" content="Mathematical Modeling"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/4a41cd6b7b7ac0b833cb66f880f47f7b334c83cb.jpg"><link rel="canonical" href="https://yousazoe.top/archives/686af6ce.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"en"}</script><title>利用蒙特卡洛法模拟竞技游戏玩家的天梯MMR分布 | Fl0w3r</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Fl0w3r" type="application/atom+xml"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Fl0w3r</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">carpe diem</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-address-card fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-paperclip fa-fw"></i>Links</a></li><li class="menu-item menu-item-photos"><a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>Photos</a></li><li class="menu-item menu-item-artitalk"><a href="/artitalk/" rel="section"><i class="fa fa-calendar fa-fw"></i>Artitalk</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-document"><a href="/docs/" rel="section"><i class="fas fa-book fa-fw"></i>Document</a></li><li class="menu-item menu-item-qexoadmin"><a href="https://blog-yousazoe-qexo.vercel.app/" rel="noopener" target="_blank"><i class="fa fa-database fa-fw"></i>QexoAdmin</a></li><li class="menu-item menu-item-gametracker"><a href="https://yousazoe.notion.site/yousazoe/b05999823bd14b57a7a6cd81fba1a1af?v=21c3398e0bdb429c9b8157b7bf12ff6a" rel="noopener" target="_blank"><i class="fas fa-trophy fa-fw"></i>GameTracker</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="https://yousazoe.top/archives/686af6ce.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><meta itemprop="name" content="Yousazoe"><meta itemprop="description" content="done is better than perfect"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Fl0w3r"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">利用蒙特卡洛法模拟竞技游戏玩家的天梯MMR分布</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-12-25 13:02:27" itemprop="dateCreated datePublished" datetime="2021-12-25T13:02:27+08:00">2021-12-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-Mathematical-Modeling/" itemprop="url" rel="index"><span itemprop="name">数学建模 (Mathematical Modeling)</span></a> </span></span><span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Views: </span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="Symbols count in article"><span class="post-meta-item-icon"><i class="fas fa-pen"></i></span><span>7.6k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span>14 mins.</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/4a41cd6b7b7ac0b833cb66f880f47f7b334c83cb.jpg"></p><span id="more"></span><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>当下我国社会工作竞争压力逐渐上升，生活节奏逐渐加快，压力与日俱增，休息的时间十分有限。因此，电脑或手机平台的电子竞技游戏作为一种既能成为社交手段，又能满足虚荣心的产物逐渐被更多人当作一种高效的解压方式。除开本身精良的制作和公平竞技带来的游戏体验，电子竞技游戏内的基于实力的天梯系统也是用户粘性的保障。由于游戏中公开的实力是玩家虚荣心的最大来源，因此，让玩家获得适当的成就感并对游戏保持持久粘性的匹配系统就成为了游戏公司内天梯设计者的目标。</p><p>对于获取不到底层数据的玩家来说，想要了解游戏天梯分布的状态，对衡量实力的隐藏分（Match Making Rating ，MMR）进行数值模拟是可行手段。然而不同竞技游戏的MMR计算方式完全不同，导致玩家的实力分布数学建模极其复杂且不具备通用性。</p><p>综上，考虑到问题的复杂性、有限的数学能力和笨拙的编程水平，本文选择使用蒙特卡洛法，通过在3种不同的游戏模型下进行的数万次模拟匹配，计算数值模拟结果并进行讨论。</p><p>本文安排如下：第 2 节将介绍蒙特卡洛法，并使用求圆周率的例子展示其特点。第 3、4 和 5 节将分别介绍 3 种游戏模型和对应的 MMR 分布结果。第 6 节将进行总结。</p><h3 id="蒙特卡洛法简介"><a href="#蒙特卡洛法简介" class="headerlink" title="蒙特卡洛法简介"></a>蒙特卡洛法简介</h3><p>蒙特卡罗法于 20 世纪 40 年代由乌拉姆（Stanislaw Marein Ulam）和冯·诺伊曼（John von Neumann）正式提出，是以大量的随机事件让频率分布接近概率分布的数值模拟方法。冯·诺伊曼用摩纳哥（国土面积约为 2.02 平方公里）的赌城蒙特卡洛（Monte Carlo）来命名这种方法。（法国数学家布丰（Georges Louis Leclere de Buffon）早在 18 世纪提出用投针实验的方法求圆周率π被认为是蒙特卡罗法的思想起源。）（本段参考：百度百科）</p><p>对于在 1/4 圆内投点求圆周率 π 的数值实验（图1），我进行了随机投点数从 1000 到 100000 的 100 组实验，每个实验包含 50 次独立实验（代码见附录）。这 100×50 次实验的数值模拟结果与 π 的差距如图 2 分布。每组 50 次实验结果的标准差和平均值与方差的分布如图 3 所示。显然，投点数目越多，模拟的数值越稳定，且越可能接近 π 的真值。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/f56684c3a198fe5b31a42c2fdc9551dd43a1de37.png@587w_518h_progressive.webp" alt="图 1 蒙特卡洛法求圆周率π示意图。实验区域为第一象限的单位正方形和1/4单位圆。红色六角星表示落点。圆周率π满足：S1/S2 =π/4 = 扇形内点占比。"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/81def16c2e50de492940f3b702da81bf68d2bdc4.png@942w_461h_progressive.webp" alt="图 2 100×50次实验结果与π的差异"></p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/186ac81d88d1896e1a94c1f986aa280762d86b91.png@942w_461h_progressive.webp" alt="图 3 每组50次实验结果的标准差和平均值"></p><h3 id="随机数游戏模型与结果"><a href="#随机数游戏模型与结果" class="headerlink" title="随机数游戏模型与结果"></a>随机数游戏模型与结果</h3><h4 id="游戏规则"><a href="#游戏规则" class="headerlink" title="游戏规则"></a>游戏规则</h4><p>参赛双方（对于同一场对阵，双方分别用甲和乙代称）分别生成一个 0 到 1 的随机数，点数大的一方获胜。</p><h4 id="MMR计算规则"><a href="#MMR计算规则" class="headerlink" title="MMR计算规则"></a>MMR计算规则</h4><ol><li><p>胜者的 MMR 增大，败者的 MMR 减小</p></li><li><p>若甲获胜，且甲赛前 MMR 高于乙（即从隐藏分看可以认为甲强于乙），则甲乙二人赛后隐藏分满足：</p><ul><li>$MMR_{甲A} = MMR_甲 + ( MMR_{Basic} - MMR_{Bonus} )$</li><li>$MMR_{乙A} = MMR_乙 - ( MMR_{Basic} - MMR_{Bonus} )$</li></ul></li><li><p>若甲战败，但甲赛前 MMR 高于乙，则甲乙二人赛后隐藏分MMRA满足：</p><ul><li>$MMR_{甲A} = MMR_甲 - ( MMR_{Basic} + MMR_{Bonus} )$</li><li>$MMR_{乙A} = MMR_乙 + ( MMR_{Basic} + MMR_{Bonus} )$</li></ul></li></ol><p>其中，$MMR_{Basic}$ 为两人赛前 MMR 相同（即实力相同）时的 MMR 变化。$MMR_{Bonus}$ 为考虑到两人隐藏分差距带来的附加 MMR 变化，满足：</p><p>$$<br>MMR_{Bonus} = ( MMR_甲 - MMR_乙 ) × MMR_{UnitBonus }<br>$$</p><p>$MMR_{UnitBonus}$ 是双方 MMR 每差距 1 点会引起的赛后 MMR 变化。$MMR_{Bonus}$ 的存在是对实力较弱一方 MMR 的保护，让其不至于因为遇到太强的对手带来的失败而受到和输给实力相近的对手一样的惩罚，而是减少较少的 MMR。同理，实力较强的选手输给实力较弱的选手理应扣更多的分数。注意，当 $MMR_{BONUS}$ 使得最终的 MMR 变化量( $MMR_{Basic} + MMR_{Bonus}$ )为负时，令其为零（否则将出现赢了反而扣 MMR 或者输了反而加 MMR 的情况）。</p><h4 id="数值模拟结果"><a href="#数值模拟结果" class="headerlink" title="数值模拟结果"></a>数值模拟结果</h4><p>我设置了 30000 名模拟选手组成的序列，每一轮让他们与随机打乱排列后的选手序列进行对抗（这样每一轮理论上会有 30000 次对抗，但若遇到自己，则不进行比赛），随机数游戏规则及比赛匹配示意图如图 4 所示。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/faa1235bfcb09de54a83a638e22db4758a9f40df.png@303w_474h_progressive.webp" alt="图 4 随机数游戏规则及匹配示意图。熊猫人的数字表示选手编号。"></p><p>为了让隐藏分分布更科学，我采用自己上万场《星际争霸2》的天梯1对1比赛的 MMR 变化经验对$MMR_{Basic}$ 和 $MMR_{Bonus}$ 进行粗略估计：$MMR_{Basic}=22$（在《星际争霸2》天梯战胜或输给 MMR 十分接近的对手，MMR 变化量为 22）；$MMR_{Bonus}=40/1000=0.04$（即双方每相差 100MMR 带来的额外 MMR 变化量为 4，这是我基于数月前在韩国服务器天梯上使用5100MMR的账号偶然匹配到并击败当时使用 6100MMR 账号的中国IG战队的职业选手并获得 62MMR（22+40）估计的）；同时，我设每位选手的初始 MMR 为 4500（这个初值并没有任何参考）。</p><p>在进行10000 轮，每轮 30000 场的比赛后，选手的 MMR 分布如图5所示。30000 名选手的 MMR 分布符合正态分布，且平均值仍为 4500。虽然存在 $MMR_{Bonus}$ 这一基于实力的额外 MMR 变化机制，随机数游戏是一个完全凭借运气的游戏。然而少数 MMR≈4800 的“大神”和M MR≈4200 的“菜鸡”仍会产生，这说明在随机数游戏中，MMR 不等于真实实力，因为无论双方 MMR 差距如何，胜率都会是50%。但游戏设计者若对玩家宣称 MMR 是实力的反映并给出“大神”和“菜鸡”确实存在的例子，没有全局数据的玩家就有更大可能将低 MMR 归咎于自己（或队友）的水平。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/02c2bc8db204760df396215326036c9129920142.png@942w_461h_progressive.webp" alt="图 5 10000轮随机数游戏后，30000名选手的MMR分布"></p><h3 id="实力天秤游戏1"><a href="#实力天秤游戏1" class="headerlink" title="实力天秤游戏1"></a>实力天秤游戏1</h3><h4 id="游戏规则-1"><a href="#游戏规则-1" class="headerlink" title="游戏规则"></a>游戏规则</h4><ol><li><p>对于实力处于同一水平的甲乙二人，天秤上刻有自然数 1 到 10000，决定胜负的位置——命运支点初始位于 5000.5 的位置。甲和乙站在左右悬臂（[1，5000] 和 [5001，10000]）两端。系统随机生成一个属于 [1，10000] 的自然数，若落在左悬臂上，则甲获胜；若落在右悬臂上，则乙获胜；若恰好落在命运支点上，则游戏平局。</p></li><li><p>MMR 高的强者在对抗 MMR 低的弱者时应具有更高胜率，将命运支点推向 MMR 低的弱者一侧，增长己方悬臂，减短对方悬臂，使弱者获胜概率降低。命运支点的位置 Fate 计算满足：</p></li></ol><p>$$<br>Fate = Fate_{Basic} + Fate_{Bonus} = 5000.5 + Fate_{Bonus}<br>$$</p><p>其中，$Fate_{Basic} = 5000.5$ 为双方实力相同时的命运支点位置。$Fate_{Bonus}$ 为双方存在实力差距时，引起的命运支点位置的变化量，满足：<br>$$<br>Fate_{Bonus} = ( MMR_甲 - MMR_乙 ) × Fate_{UnitBonus} × Factor_{power}<br>$$</p><p>其中，$Factor_{UnitBonus}$ 表示单位 MMR 差距引起的命运支点向弱者一侧的移动量；$Factor_{power}$ 表示 $Fate_{Bonus}$ 因为所在分段不同引起的变化（即不同分段，MMR 差距对胜率的影响不同）。对于 MMR 初值为 4500 的模型，$Factor_{power}$ 满足：<br>$$<br>Factor_{power} = （ MMR_甲 - MMR_乙 ) / (2 × 4500)<br>$$</p><p>因此，对于平均 MMR 为 4500 的对抗双方，若设 $Factor_{UnitBonus}=5$，对于比弱者高 200MMR 的强者在与弱者对抗时，命运支点的位置将是 6000.5，因此强者将具有 60% 的胜率；而比弱者高 1000 分的强者将使得命运支点的位置移动到 10000.5，即理论上具有100%的胜率。实力天秤游戏1的游戏规则示意图如图6所示。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/2ad365fdde525998ab849b87089a8cfcd1d7549a.png@942w_176h_progressive.webp" alt="图 6 实力天秤游戏1的游戏规则示意图。黄色的六边形表示系统随机生成的落点。黑色的箭头及上方的数字表示命运支点的位置。左右两个熊猫人是两位选手，下方为他们的MMR。对于4600MMR Vs. 4400MMR的比赛，甲将具有60%的胜率。"></p><h4 id="MMR计算规则-1"><a href="#MMR计算规则-1" class="headerlink" title="MMR计算规则"></a>MMR计算规则</h4><p>同第3节中的随机数游戏。</p><h4 id="数值模拟结果-1"><a href="#数值模拟结果-1" class="headerlink" title="数值模拟结果"></a>数值模拟结果</h4><p>实力天秤游戏1中，MMR 差距将产生胜率差距，因此 MMR 差异能够反映选手间的实力差距，$MMR_{Bonus}$ 这一基于实力的额外 MMR 变化机制也就真正起到了预期作用，因此实力天秤游戏1是一个运气和实力都起作用的游戏，比较符合真实竞技游戏的情况。在进行 1500 轮，每轮 30000 场的比赛后，选手的 MMR 分布如图7所示。30000 名选手的 MMR 分布十分类似正态分布（但绝不是正态分布，因为 $Factor_{power}$ 与不仅与双方 MMR 差距有关，与双方平均 MMR 也有关），这说明玩家水平集中的位置是中间段位（《星际争霸2》的“黄金”、“白金”和“钻石”段位集中了较多的选手），但平均 MMR 下降至约 4400。</p><p>同时，相比于上一节中进行了 10000 轮的随机数游戏，实力天秤游戏1仅用了不到 1500 轮对抗就产生了高于平均水平 300MMR（MMR &gt; 4700）的“大神”和低于平均水平 300MMR（MMR &lt; 4100）的“菜鸡”，说明该模型在区分玩家水平的速度上较随机数游戏模型快得多。</p><p>MMR 下降的情况在多组重复实验均有出现，我对此暂时没有合理的解释。但实力天秤游戏1的游戏模型与《星际争霸2》的天梯十分相似（大部分数据就是来自我基于上万盘《星际争霸2》的天梯比赛总结的估计）。而平均 MMR 下降的情况在《星际争霸2》的天梯中确实存在，在中国服务器上尤为明显（比较间隔2个赛季的大师组 MMR 将很容易看出来）。因此，在实力天秤游戏1的游戏模型中，MMR 反映的是同时期选手间的实力差距和选手实力在总体分布中的位置（即当前水平），而不同时期选手自身 MMR 的变化未必反映选手自身实力的强弱变化。</p><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/07425d5a6442eccbf05b13be944ce83abd7a9c1c.png@942w_461h_progressive.webp" alt="图 7 1500轮实力天秤游戏1的比赛后，30000名选手的MMR分布。"></p><h3 id="实力天秤游戏2"><a href="#实力天秤游戏2" class="headerlink" title="实力天秤游戏2"></a>实力天秤游戏2</h3><h4 id="游戏规则-2"><a href="#游戏规则-2" class="headerlink" title="游戏规则"></a>游戏规则</h4><p>同第4节中的实力天秤游戏1。</p><h4 id="MMR计算"><a href="#MMR计算" class="headerlink" title="MMR计算"></a>MMR计算</h4><p>在与电脑中的《星际争霸2》不同的，近期兴起的手机竞技游戏《王者荣耀》和卡牌游戏《炉石传说》为代表的天梯排名的 MMR 是不公开的，玩家看到的是自己的段位晋级进度（晋级星数）而玩家间衡量实力和获取虚荣心的方式也是段位和晋级星数。同时，匹配制度也是基于段位和晋级星数而非 MMR（玩家匹配到的是与自己所处段位相同的玩家，即在玩家看来与自身势均力敌的玩家，而不一定是真正与自己势均力敌的玩家，这样有利于稳定玩家的游戏心态）。因此在本章中，为了简化编程和计算，我采用了之前的 MMR 作为变量，但注意，这里的 MMR 和第 3 和第 4 节中 MMR 在概念上存在差异。为了与段位和晋级星数具有相同性质，MMR 的计算方式修改为：</p><ol><li><p>胜者的 MMR 增大，败者的 MMR 减小</p></li><li><p>若甲获胜，且甲赛前 MMR 高于乙（即从隐藏分看可以认为甲强于乙），则甲乙二人赛后隐藏分满足：</p><ul><li>$MMR_{甲A} = MMR_甲 + ( MMR_{Basic} - MMR_{Bonus} )$</li><li>$MMR_{乙A} = MMR_乙 - ( MMR_{Basic} - MMR_{Bonus} )$</li></ul></li><li><p>若甲战败，但甲赛前MMR高于乙，则甲乙二人赛后隐藏分 MMRA 满足：</p><ul><li>$MMR_{甲A} = MMR_甲 - ( MMR_{Basic} + MMR_{Bonus} )$</li><li>$MMR_{乙A} = MMR_乙 + ( MMR_{Basic} + MMR_{Bonus} )$</li></ul></li></ol><p>其中，$MMR_{Basic}$ 为两人赛前 MMR 相同（即实力相同）时的 MMR 变化。但是注意 $MMR_{Bonus}$ 不再起作用，即无论你与你的队友或对手的段位存在何种差距，MMR 的变化量不会改变（例如，《王者荣耀》中，若不考虑段位保护和奖励机制，无论匹配到什么对手，无论队友段位如何，获胜或失败导致晋级星数的变化量均为1），因此，$MMR_{Bonus}$ 满足：<br>$$<br>MMR_{Bonus} ≡ 0<br>$$</p><h4 id="数值模拟结果-2"><a href="#数值模拟结果-2" class="headerlink" title="数值模拟结果"></a>数值模拟结果</h4><p>在模拟了 2000 轮，每轮 30000 次的实力天秤游戏2的比赛后，并令差距在 1000MMR 的比赛无效（1000/22 ≈ 45.5个晋级星数，属于十分显著的段位差距）。选手 MMR 分布如图8所示，根据实力分层将他们分为9种段位。可以发现，实力天秤游戏2的数值模拟结果具有如下特点：</p><ol><li>选手出现了明显的分层，且实力差距相比于随机数游戏和实力天秤游戏1更为显著（达到 10000MMR）</li><li>MMR 越高，层中的选手数目越少；最底层中的选手数量最多；即高水平玩家的数量比“青铜”段位玩家的数量稀少得多</li><li>实力相近的选手MMR会在段位内集中分布，且高段位中的 MMR 更集中，即更难拉开差距。但是，在具有最强实力的“职业”水平，选手没有形成集中的分层，个体实力差异明显。这与电子竞技游戏职业玩家中存在超越平均职业选手水平的具有统治力的选手的现象相符。</li><li>初始 MMR 的作用被弱化。对于普通玩家来说，难以准确了解自己在定级前的初始 MMR 或初始段位。</li></ol><p><img data-src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/4a21549c8c7265e66dd0114bd20b0fcc7d3b6da0.png@942w_519h_progressive.webp" alt="图 8 2000轮实力天秤游戏2的比赛后，30000名选手的MMR分布。可以看到明显的MMR分层，这里依据分布给他们划分段位：青铜、白银、黄金、白金、钻石、大师、宗师、业余顶尖和职业。段位越高，选手的数量越稀少。"></p><p>在实力天秤游戏2的模型下，由于玩家依据 MMR 分布趋于集中，因此匹配到相同段位选手的可能性越高。由于低段位层（例如“青铜”和“白银”）中玩家数量更多，这一现象在低段位会更加显著。综上，除非玩家水平显著超过当前段位，否则进行对实力进步没有帮助的大量而盲目游戏将使玩家越发深陷当前段位，无法晋级，这与大量玩家日夜游戏但仍是青铜的现象相符。同时，这也是高水平玩家的水平存在“瓶颈”，难以获得提升的原因之一。</p><p>同时，图8展示的 MMR 分层中的每一层与系统赋予所有选手相同的初始 MMR 的情况是类似的，因此可以预见，若匹配的轮数增加，现有的段位分层中将再出现次级分层，导致当前段位划分将不足以区当前分段位中产生的次级分层的选手，因此必然会引入次级段位来区分这些玩家（例如，引入“大师3”，”大师2”，”大师1”三个次级段位来区分曾经的”大师”水平的玩家）。</p><h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>本文采用蒙特卡洛方法，建立了随机数游戏，实力天秤游戏1 和 实力天秤游戏2 三种游戏模型和对应的 MMR 计算模型，分别计算了进行 10000、1500、2000 轮，每轮 30000 场比赛的模拟结果。</p><p>对于完全依靠运气的随机数游戏，MMR 机制依然能导致“大神”和“菜鸡”的产生，因此玩家应该仔细甄别游戏机制，理性对待游戏内对玩家水平的划分方式，才能对自己的真实水平有准确的了解。</p><p>与《星际争霸2》较为接近的实力天秤游戏游戏1的游戏模型中，MMR 反映同时期玩家相对水平。在具有合理的对抗 MMR 实力补偿方式：$MMR_{Bonus}$ 的情况下，玩家因对匹配到强大对手而战败带来的“掉分”等负面结果将被缩小。然而，实力游戏天秤1的游戏模型将使玩家主要集中与平均水平附近。数值模拟结果中出现了平均 MMR 下降这一现象是缺乏全局信息的普通玩家无法预见的，这将导致看到 MMR 下降这一表面现象的玩家错误地将此完全归咎于实力的降低（例如老玩家产生“为什么我越打越菜”的错误判断），这不利于满足玩家的虚荣心。</p><p>与《王者荣耀》和《炉石传说》较为接近的实力天秤游戏2的游戏模型中，MMR 与《王者荣耀》和《炉石传说》的段位晋级星数类似，分层则与它们的段位类似。这样的游戏模型能更快更显著地区分玩家间的实力，并且产生次级段位。同时让广大玩家集中于底层段位，而不是中间段位。然而，导致玩家难以逾越目前段位的情况虽然有利于增加玩家粘性，但若在团队游戏中使用这样的晋级计算方式，必然导致玩家因为长期不达目而出现不健康的游戏心态，将无法晋级全部归咎于类似“队友太菜”的外部因素。《炉石传说》也具有类似的段位计算和晋级方式，但作为一个1对1的卡牌游戏，玩家更多将无法晋级归咎于“卡组克制”、“打牌细节粗糙”和“右手第一张神抽”等原因，前二者有助于促进玩家间的交流，而最后则是运气成分，有助于玩家接受自己难以晋级的事实。</p><p>综上所述，基于实力天秤游戏2的游戏模型进行1对1的竞技游戏天梯的设计将有助于游戏段位和玩家实力的区分，并引导玩家产生正确的游戏心态</p><p>实力天秤游戏2的 MMR 计算方式还有如下改进余地。既然 MMR 与晋级星数类似，考虑到晋级星数不能为负的事实，令负 MMR 恒等于 0 将与“青铜3”段位且没有晋级星数的窘境等价。若再将初始 MMR 设为较低的值（例如 1000），就可以使更大量的玩家更快集中于底层的“青铜”组，同时也使高段位玩家更加稀有。</p><p>蒙特卡洛方法在处理这种无法知道本身原理且需要大量数据作为支撑的实际问题的数值模拟十分有效。但是，它会消耗大量的计算资源，且虽然能揭示现实问题中的现象，却完全无法直接给出其本质原因。因此，对于具有成熟而清晰的理论依据的问题，不建议使用蒙特卡洛算法。</p><h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><p>第 2 节中的计算圆周率实验的matlab代码：</p><figure class="highlight matlab"><table><tbody><tr><td class="code"><pre><span class="line">Num_repeat=<span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">Num_spot=<span class="number">1000</span>:<span class="number">1000</span>:<span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n2=<span class="number">1</span>:<span class="built_in">length</span>(Num_spot)</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp; <span class="keyword">for</span> n1=<span class="number">1</span>:Num_repeat</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf([‘正在模拟随机放置’,num2str(Num_spot(n2)),‘个点第’,num2str(n1),‘次实验。稍安勿躁！\n']);</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N_in=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="keyword">for</span> m=<span class="number">1</span>:Num_spot(n2)</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x(m)=<span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y(m)=<span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="keyword">if</span> (x(m)^<span class="number">2</span>+y(m)^<span class="number">2</span>)&lt;<span class="number">1</span></span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N_in=N_in+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="keyword">elseif</span> (x(m)^<span class="number">2</span>+y(m)^<span class="number">2</span>)==<span class="number">1</span></span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N_in=N_in+<span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pi(n2,n1)=N_in/Num_spot(n2)*<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp; <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure></div><div class="popular-posts-header">Related Posts</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/6ddbab03.html" rel="bookmark">火箭为什么是三级</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/a03a749.html" rel="bookmark">手机是怎么知道你的位置的</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/1492ea3c.html" rel="bookmark">马尔萨斯人口论与数学建模</a></div></li></ul><footer class="post-footer"><div class="post-tags"><a href="/tags/Math/" rel="tag"># Math</a> <a href="/tags/Mathematical-Modeling/" rel="tag"># Mathematical Modeling</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/1b27bc7.html" rel="prev" title="如何使用Notion制作个人网站"><i class="fa fa-chevron-left"></i> 如何使用Notion制作个人网站</a></div><div class="post-nav-item"><a href="/archives/6b9a4c74.html" rel="next" title="三维几何学基础">三维几何学基础 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E6%B3%95%E7%AE%80%E4%BB%8B"><span class="nav-number">2.</span> <span class="nav-text">蒙特卡洛法简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%B8%B8%E6%88%8F%E6%A8%A1%E5%9E%8B%E4%B8%8E%E7%BB%93%E6%9E%9C"><span class="nav-number">3.</span> <span class="nav-text">随机数游戏模型与结果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E8%A7%84%E5%88%99"><span class="nav-number">3.1.</span> <span class="nav-text">游戏规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MMR%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99"><span class="nav-number">3.2.</span> <span class="nav-text">MMR计算规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%A8%A1%E6%8B%9F%E7%BB%93%E6%9E%9C"><span class="nav-number">3.3.</span> <span class="nav-text">数值模拟结果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E5%8A%9B%E5%A4%A9%E7%A7%A4%E6%B8%B8%E6%88%8F1"><span class="nav-number">4.</span> <span class="nav-text">实力天秤游戏1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E8%A7%84%E5%88%99-1"><span class="nav-number">4.1.</span> <span class="nav-text">游戏规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MMR%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99-1"><span class="nav-number">4.2.</span> <span class="nav-text">MMR计算规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%A8%A1%E6%8B%9F%E7%BB%93%E6%9E%9C-1"><span class="nav-number">4.3.</span> <span class="nav-text">数值模拟结果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E5%8A%9B%E5%A4%A9%E7%A7%A4%E6%B8%B8%E6%88%8F2"><span class="nav-number">5.</span> <span class="nav-text">实力天秤游戏2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E8%A7%84%E5%88%99-2"><span class="nav-number">5.1.</span> <span class="nav-text">游戏规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MMR%E8%AE%A1%E7%AE%97"><span class="nav-number">5.2.</span> <span class="nav-text">MMR计算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%A8%A1%E6%8B%9F%E7%BB%93%E6%9E%9C-2"><span class="nav-number">5.3.</span> <span class="nav-text">数值模拟结果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-number">6.</span> <span class="nav-text">结论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-number">7.</span> <span class="nav-text">附录</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Yousazoe" src="https://tva1.sinaimg.cn/large/008eGmZEly1gn2f3efk0dj30lc0lcq31.jpg"><p class="site-author-name" itemprop="name">Yousazoe</p><div class="site-description" itemprop="description">done is better than perfect</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">276</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:zoeyousa@gmail.com" title="E-Mail → mailto:zoeyousa@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://github.com/Yousazoe" title="GitHub → https://github.com/Yousazoe" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://twitter.com/YousaZoe" title="Twitter → https://twitter.com/YousaZoe" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" title="Weibo → https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://steamcommunity.com/profiles/76561198856466228/" title="Steam → https://steamcommunity.com/profiles/76561198856466228/" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.chess.com/member/yousazoe" title="Chess → https://www.chess.com/member/yousazoe" rel="noopener" target="_blank"><i class="fa fa-chess-pawn fa-fw"></i></a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="./image/loading.gif" data-original="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="cc-license animated" itemprop="sponsor"><span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="./image/loading.gif" data-original="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="translate-style">繁/简：<a id="translateLink" href="javascript:translatePage();">繁体</a></div><script type="text/javascript" src="/js/tw_cn.js"></script><script type="text/javascript">var defaultEncoding=2,translateDelay=0,cookieDomain="https://tding.top/",msgToTraditionalChinese="繁体",msgToSimplifiedChinese="简体",translateButtonId="translateLink";translateInitilization()</script><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">晋ICP备2021009930号 </a><img src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/备案图标.png" style="display:inline-block"></div><div class="copyright">© 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Yousazoe</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="Symbols count total">4.1m</span></div><div class="powered-by"><span><a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral"><img src="./image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/YukiNoUta/cdn-static@main/blog/svg/upyun.svg" width="53" height="18" style="fill:currentColor;display:inline-block"></a></span><span class="post-meta-divider">|</span>今早雾霾蔽日，但是不要害怕，太阳依旧在云端</div><div class="busuanzi-count"><script data-pjax="" async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="//unpkg.com/animejs@3.1.0/lib/anime.min.js"></script><script src="//npm.elemecdn.com/pjax/pjax.min.js"></script><script src="//lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="//unpkg.com/lozad@1.16.0/dist/lozad.min.js"></script><script src="//lib.baomitu.com/pangu/4.0.7/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
    $(document).ready(function () {

    if(location.href.indexOf("#reloaded")==-1){
        location.href=location.href+"#reloaded";
        location.reload();
    }
}）
#在这后面可以加入程序的其他代码  


  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });

  
  NexT.boot.refresh();
  
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  
  NexT.utils.updateSidebarPosition();
});</script><script defer="" src="/lib/three/three.min.js"></script><script defer="" src="//fastly.jsdelivr.net/gh/bynotes/texiao/source/js/caidai.js"></script><script data-pjax="">!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script data-pjax="">document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),r=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script data-pjax="">document.querySelectorAll("pre.mermaid").length&&NexT.utils.getScript("//lib.baomitu.com/mermaid/8.4.8/mermaid.min.js",()=>{mermaid.initialize({theme:"forest",logLevel:3,flowchart:{curve:"linear"},gantt:{axisFormat:"%m/%d/%Y"},sequence:{actorMargin:50}})},window.mermaid)</script><div id="pjax"><script>"undefined"==typeof MathJax?(window.MathJax={loader:{source:{"[tex]/amsCd":"[tex]/amscd","[tex]/AMScd":"[tex]/amscd"}},tex:{inlineMath:{"[+]":[["$","$"]]},tags:"ams"},options:{renderActions:{findScript:[10,n=>{document.querySelectorAll('script[type^="math/tex"]').forEach(e=>{var t=!!e.type.match(/; *mode=display/);const a=new n.options.MathItem(e.textContent,n.inputJax[0],t);t=document.createTextNode("");e.parentNode.replaceChild(t,e),a.start={node:t,delim:"",n:0},a.end={node:t,delim:"",n:0},n.math.push(a)})},"",!1],insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(e=>{let t=e.parentNode;"li"===t.nodeName.toLowerCase()&&t.parentNode.classList.add("has-jax")})},"",!1]}}},function(){var e=document.createElement("script");e.src="//lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js",e.defer=!0,document.head.appendChild(e)}()):(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset())</script></div><script type="text/javascript" src="/js/cursor/fireworks.js"></script><script async="" src="//code.tidio.co/ij6vccjedzwoh5yxyoc9qbw6tycfnwjj.js"></script><script>!function(t,h,e,j){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2272201,hjsv:6},e=h.getElementsByTagName("head")[0],(j=h.createElement("script")).async=1,j.src="https://static.hotjar.com/c/hotjar-"+t._hjSettings.hjid+".js?sv="+t._hjSettings.hjsv,e.appendChild(j)}(window,document)</script><script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"live2d-widget-model-hijiki"},display:{position:"right",width:100,height:200},mobile:{show:!0},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:3,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>