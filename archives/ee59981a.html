<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="mask-icon" href="/images/favicon.ico" color="#222"><meta name="google-site-verification" content="35AYyqm-wpmGmXtkn-vQMrk7AkFl1Do55uHdlLLLT38"><meta name="baidu-site-verification" content="slBbq5f8WxljPytW"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/5.15.4/css/all.min.css"><link rel="stylesheet" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//unpkg.com/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//unpkg.com/pace-js@1.2.4/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"yousazoe.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!0,comments:{style:"tabs",active:null,storage:!0,lazyload:!0,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:3,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Twitter@AsyranHazwan               引言GAMES201高级物理引擎实战是由胡渊鸣老师教授。本节主要讲述了老师与物理引擎的故事、太极编程语言以及该系列课程内容的介绍。"><meta property="og:type" content="article"><meta property="og:title" content="Introduction"><meta property="og:url" content="https://yousazoe.top/archives/ee59981a.html"><meta property="og:site_name" content="Fl0w3r"><meta property="og:description" content="Twitter@AsyranHazwan               引言GAMES201高级物理引擎实战是由胡渊鸣老师教授。本节主要讲述了老师与物理引擎的故事、太极编程语言以及该系列课程内容的介绍。"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/E4xJme9VUAEI0Cd.jpeg"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701135720064.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701140427097.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141208877.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141535906.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141847711.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142035182.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142530213.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142831662.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143209742.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143701106.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143946655.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144022754.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144336903.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144836220.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144953922.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701145142621.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701145338319.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701164745250.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172105296.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172240794.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172608321.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173008944.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173318387.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173956881.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701174147153.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701174726967.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701181803381.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701192234480.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701192900786.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701212446360.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701225455668.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701232400669.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701235850626.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000731717.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000807920.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702001019222.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003140404.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011544805.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011613661.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011648101.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011729708.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003245409.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702013945651.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003323334.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702014743828.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702020346244.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000324169.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000254571.png"><meta property="article:published_time" content="2021-07-01T05:45:14.000Z"><meta property="article:modified_time" content="2022-07-31T02:24:20.413Z"><meta property="article:author" content="Yousazoe"><meta property="article:tag" content="Computer Graphics"><meta property="article:tag" content="Physics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/E4xJme9VUAEI0Cd.jpeg"><link rel="canonical" href="https://yousazoe.top/archives/ee59981a.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"en"}</script><title>Introduction | Fl0w3r</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Fl0w3r" type="application/atom+xml"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Fl0w3r</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">carpe diem</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-address-card fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-paperclip fa-fw"></i>Links</a></li><li class="menu-item menu-item-photos"><a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>Photos</a></li><li class="menu-item menu-item-artitalk"><a href="/artitalk/" rel="section"><i class="fa fa-calendar fa-fw"></i>Artitalk</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-document"><a href="/docs/" rel="section"><i class="fas fa-book fa-fw"></i>Document</a></li><li class="menu-item menu-item-qexoadmin"><a href="https://blog-yousazoe-qexo.vercel.app/" rel="noopener" target="_blank"><i class="fa fa-database fa-fw"></i>QexoAdmin</a></li><li class="menu-item menu-item-gametracker"><a href="https://yousazoe.notion.site/yousazoe/b05999823bd14b57a7a6cd81fba1a1af?v=21c3398e0bdb429c9b8157b7bf12ff6a" rel="noopener" target="_blank"><i class="fas fa-trophy fa-fw"></i>GameTracker</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="https://yousazoe.top/archives/ee59981a.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="https://img.yousazoe.top/uPic/img/blog/icon/icon.jpeg"><meta itemprop="name" content="Yousazoe"><meta itemprop="description" content="done is better than perfect"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Fl0w3r"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Introduction</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-07-01 13:45:14" itemprop="dateCreated datePublished" datetime="2021-07-01T13:45:14+08:00">2021-07-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/%E9%AB%98%E7%BA%A7%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%E5%AE%9E%E6%88%98-GAMES201-Advanced-Physics-Engines/" itemprop="url" rel="index"><span itemprop="name">高级物理引擎实战 (GAMES201-Advanced Physics Engines)</span></a> </span></span><span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Views: </span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="Symbols count in article"><span class="post-meta-item-icon"><i class="fas fa-pen"></i></span><span>5.4k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span>10 mins.</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/E4xJme9VUAEI0Cd.jpeg"></p><div align="center"><font size="3"><i><a target="_blank" rel="noopener" href="https://twitter.com/AsyranHazwan/status/1408582367187398656">Twitter@AsyranHazwan</a></i></font></div><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>GAMES201高级物理引擎实战是由胡渊鸣老师教授。本节主要讲述了老师与物理引擎的故事、太极编程语言以及该系列课程内容的介绍。</p><span id="more"></span><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701135720064.png"></p><h3 id="Physics-Engine"><a href="#Physics-Engine" class="headerlink" title="Physics Engine"></a>Physics Engine</h3><blockquote><p>“A physics engine is computer software that provides an approximate simulation of certain physical systems, such as rigid body dynamics (including collision detection), soft body dynamics, and fluid dynamics, of use in the domains of computer graphics, video games and film.”</p><p>—— <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Physics_engine">https://en.wikipedia.org/wiki/Physics_engine</a></p></blockquote><p>我们开门见山定义一下什么是物理引擎。在维基百科上可以看到物理引擎是一个计算机软件，它提供对物理系统近似的模拟，比如刚体物理的动力学、软体动力学以及流体动力学。主要的应用是在计算机图形、游戏和电影。</p><blockquote><p>Simulate the world in your computer!</p></blockquote><p>这么长的定义换成一句话说就是在电脑里模拟这个世界。</p><h3 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h3><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701140427097.png"></p><p>除了刚才说到的这些应用，它还可以应用在工业软件中，在计算机中完成测试迭代；还有一个很重要的应用是电影的视觉特效，基本每个动画电影都有非常多的镜头用物理效果模拟出来的；虚拟现实和增强现实更不用多说，如果在VR里有一个真实的物理世界，那么沉浸感会增强很多，虚拟世界和现实世界的物理规律是一致的。</p><p>当然，大家最关心的物理引擎的用途还是在游戏里面，所以今天就仔细讲一讲游戏。</p><h4 id="The-Incredible-machines"><a href="#The-Incredible-machines" class="headerlink" title="The Incredible machines"></a>The Incredible machines</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141208877.png"></p><p>很小的时候就玩过很多游戏，它们构成了我童年的很大一部分，有一个我印象比较深的游戏叫做“不可思议的机器人”。这个游戏你可以摆入各种各样神奇的道具，模拟物理效果。</p><h4 id="Angry-Birds"><a href="#Angry-Birds" class="headerlink" title="Angry Birds"></a>Angry Birds</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141535906.png"></p><p>愤怒的小鸟也是一款很经典的游戏。你可以通过拖拽弹弓，小鸟撞到游戏里各种障碍物，里面的猪碰到障碍物就会被消灭掉。</p><h4 id="Phun-Algodoo"><a href="#Phun-Algodoo" class="headerlink" title="Phun (Algodoo)"></a>Phun (Algodoo)</h4><p>另外一个更可定制一点的是纯物理引擎，不是游戏。它可以在里面放齿轮、滑轮、棱镜等等，你可以在里面创建一个物理世界。</p><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701141847711.png"></p><h4 id="Besieged"><a href="#Besieged" class="headerlink" title="Besieged"></a>Besieged</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142035182.png"></p><p>15年的时候又有一款比较有意思的游戏：围攻。你可以自己把各种个样的模块把它组装成一个攻城武器，去攻打各种各样的城池。</p><h3 id="My-Own-Physical-Simulation-Story"><a href="#My-Own-Physical-Simulation-Story" class="headerlink" title="My Own Physical Simulation Story"></a>My Own Physical Simulation Story</h3><p>下面我讲讲自己和物理引擎的故事，从初中二年级到博士三年级（2009～2020）。</p><h4 id="My-first-physics-engine"><a href="#My-first-physics-engine" class="headerlink" title="My first physics engine"></a>My first physics engine</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142530213.png"></p><p>上图是09写的第一个物理引擎，其实非常简单，就是一个弹簧质点系统。</p><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701142831662.png"></p><h4 id="My-own-rigid-body-simulator"><a href="#My-own-rigid-body-simulator" class="headerlink" title="My own rigid body simulator"></a>My own rigid body simulator</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143209742.png"></p><p>这是高中时候做的，那时学了一点刚体动力学，受到愤怒的小鸟的影响写了一个刚体物理引擎。</p><h4 id="My-rigid-body-game"><a href="#My-rigid-body-game" class="headerlink" title="My rigid body game"></a>My rigid body game</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143701106.png"></p><p>这是大二写的基于物理引擎的游戏。</p><h4 id="My-fluid-simulator"><a href="#My-fluid-simulator" class="headerlink" title="My fluid simulator"></a>My fluid simulator</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701143946655.png"></p><p>大概16年的时候写了流体的模拟。</p><h4 id="My-smoke-simulator"><a href="#My-smoke-simulator" class="headerlink" title="My smoke simulator"></a>My smoke simulator</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144022754.png"></p><p>17年的时候写了烟的模拟。</p><h4 id="My-continuum-cutting-simulator"><a href="#My-continuum-cutting-simulator" class="headerlink" title="My continuum + cutting simulator"></a>My continuum + cutting simulator</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144336903.png"></p><p>这是我第一篇SIGGRAPH，做的是切割的模拟，实现了固体和液体显示的耦合。</p><h4 id="Differentiable-Simulation"><a href="#Differentiable-Simulation" class="headerlink" title="Differentiable Simulation"></a>Differentiable Simulation</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144836220.png"></p><p>最近在搞可微模拟，希望求出初始状况的扰动对结果的影响。</p><h4 id="Now"><a href="#Now" class="headerlink" title="Now"></a>Now</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701144953922.png"></p><h3 id="Keywords-of-this-course"><a href="#Keywords-of-this-course" class="headerlink" title="Keywords of this course"></a>Keywords of this course</h3><h4 id="Discretization"><a href="#Discretization" class="headerlink" title="Discretization"></a>Discretization</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701145142621.png"></p><p>我们会简单讲讲各种各样的离散化，不会讲的特别深。因为自己是计算机方面的，所以更多会从程序员的角度讲讲怎样直观的理解各种各样的离散化。</p><h4 id="Efficient-Solvers"><a href="#Efficient-Solvers" class="headerlink" title="Efficient Solvers"></a>Efficient Solvers</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701145338319.png"></p><p>我们会讲怎样写有效率的求解器，后面我们会详细介绍。</p><h4 id="Productivity"><a href="#Productivity" class="headerlink" title="Productivity"></a>Productivity</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701164745250.png"></p><p>同样我们会讲讲怎么会提高生产力，怎么样用比较短的代码实现一个高效metric。</p><h4 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172105296.png"></p><p>当然我们也很在意性能，刚才提到很多模拟我们要等上一天的时间。</p><h4 id="Hardware-architecture"><a href="#Hardware-architecture" class="headerlink" title="Hardware architecture"></a>Hardware architecture</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172240794.png"></p><p>我们也会简单介绍一下硬件的体系结构，因为如果你要写高性能求解器，需要去了解硬件是什么样子的，否则很难把它全部利用起来。</p><h4 id="Data-Structures"><a href="#Data-Structures" class="headerlink" title="Data Structures"></a>Data Structures</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701172608321.png"></p><p>还有一些复杂的数据结构，太极语言让这些数据结构的使用变得更加简单，后面我们会详细介绍。</p><h4 id="Parallelization"><a href="#Parallelization" class="headerlink" title="Parallelization"></a>Parallelization</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173008944.png"></p><p>我们也会讲讲怎么去做复杂的并行，因为现在并行硬件大行其道，CPU和GPU如果算吞吐量真的是天壤之别，一般能差上一个数量级。</p><h4 id="Differentiability"><a href="#Differentiability" class="headerlink" title="Differentiability"></a>Differentiability</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173318387.png"></p><p>最后我们会讲讲怎么求simulation的导数，做很多有意思的东西。</p><h3 id="Taichi-Programming-Language-Introduction"><a href="#Taichi-Programming-Language-Introduction" class="headerlink" title="Taichi Programming Language Introduction"></a>Taichi Programming Language Introduction</h3><h4 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701173956881.png"></p><h4 id="What-is-Taichi"><a href="#What-is-Taichi" class="headerlink" title="What is Taichi?"></a>What is Taichi?</h4><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701174147153.png"></p><p>什么是太极呢？太极是一个高性能领域特定语言，它嵌入在python里面，所以它的语法和python非常非常的像，如果你会python，那么可以很快上手太极。</p><p>这门语言是专门用于计算机图形学而设计的，我们在设计的时候非常非常注重生产力和可移植性，这两个东西以前在计算机图形学里面是非常难以做到的。这里的生产力不是说游戏引擎，而是针对想研究图形学算法的人。</p><h4 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h4><h5 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701174726967.png"></p><p>我们先来看看如何安装。如果你有Python 3.6+可以直接用以下命令安装太极：</p><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">python3 -m pip install taichi</span><br></pre></td></tr></tbody></table></figure><p>三个主流的操作系统都是支持的，太极程序既可以在CPU上运行又可以在GPU上运行（支持CUDA、OpenGL、Apple Metal）。如果你的CPU是一些神奇的配置或Python是3.9以上，那么需要下载太极源代码下来装了。</p><blockquote><p>不同操作系统所支持的后端：</p><table><thead><tr><th>平台</th><th>CPU</th><th>CUDA</th><th>OpenGL</th><th>Metal</th></tr></thead><tbody><tr><td>Windows</td><td>可用</td><td>可用</td><td>可用</td><td>不可用</td></tr><tr><td>Linux</td><td>可用</td><td>可用</td><td>可用</td><td>不可用</td></tr><tr><td>Mac OS X</td><td>可用</td><td>不可用</td><td>不可用</td><td>可用</td></tr></tbody></table><p>（可用: 该系统上有最完整的支持；不可用: 由于平台限制，我们无法实现该后端）</p><p>在参数 <code>arch=ti.gpu</code> 下，Taichi 将首先尝试在 CUDA 上运行。如果你的设备不支持 CUDA，那么 Taichi 将会转到 Metal 或 OpenGL。如果所在平台不支持 GPU 后端（CUDA、Metal 或 OpenGL），Taichi 将默认在 CPU 运行。</p></blockquote><p>这里我选择直接在Pycharm中安装太极：</p><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701181803381.png"></p><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701192234480.png"></p><h5 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701192900786.png"></p><p>初始化太极非常重要，每当你运行一个太极程序的时候总是调用一下：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line"></span><br><span class="line">ti.init(arch=ti.cuda)</span><br></pre></td></tr></tbody></table></figure><p>其中<code>arch</code>可以选择在什么硬件上跑，建议大家使用<code>ti.cpu</code>或<code>ti.gpu</code>。</p><h4 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h4><h5 id="Data-types"><a href="#Data-types" class="headerlink" title="Data types"></a>Data types</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701212446360.png"></p><p>太极里支持的数据类型和C非常像，它有8、16、32、64位的整型，整型里又分为带符号的和不带符号的，还有32、64位的浮点数类型。</p><p>目前太极不支持<code>bool</code>类型：<code>true</code>、<code>false</code>，所有的比较返回值都是用整型存储。当然并不是所有的后端都支持所有的类型，因为比如OpenGL可能不支持64位的整数和浮点数，文档中有一个表详细写了每个后端支持什么样的数据类型。</p><h5 id="Tensors"><a href="#Tensors" class="headerlink" title="Tensors"></a>Tensors</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701225455668.png"></p><p>接下来我们介绍数据里最重要的概念Tensors，一般来讲可以认为张量就是高维数组。你可以认为0维张量就是标量，1维的张量就是向量，2维的张量是一个矩阵，在太极中张量和矩阵会严格区分，是两个完全不一样的概念。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init()</span><br><span class="line"></span><br><span class="line">a = ti.var(dt=ti.f32, shape=(<span class="number">42</span>, <span class="number">63</span>))           <span class="comment"># A tensor of 42x63 scalars</span></span><br><span class="line">b = ti.Vector(<span class="number">3</span>, dt=ti.f32, shape=<span class="number">4</span>)            <span class="comment"># A tensor of 4x 3D vectors</span></span><br><span class="line">C = ti.Matrix(<span class="number">2</span>, <span class="number">2</span>, dt=ti.f32, shape=(<span class="number">3</span>, <span class="number">5</span>))    <span class="comment"># A tensor of 3x5 2x2 matrices</span></span><br><span class="line"></span><br><span class="line">loss = ti.var(dt=ti.f32, shape=())              <span class="comment"># A (0-D) tensor of a single scalar</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">3</span>, <span class="number">4</span>] = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'a[3, 4] = '</span>, a[<span class="number">3</span>, <span class="number">4</span>])                    <span class="comment"># "a[3, 4] = 1.000000"</span></span><br><span class="line"></span><br><span class="line">b[<span class="number">2</span>] = [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'b[0] = '</span>, b[<span class="number">0</span>][<span class="number">0</span>], b[<span class="number">0</span>][<span class="number">1</span>], b[<span class="number">0</span>][<span class="number">2</span>])     <span class="comment"># print(b[0]) is not yet supported</span></span><br><span class="line"></span><br><span class="line">loss[<span class="literal">None</span>] = <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(loss[<span class="literal">None</span>])                               <span class="comment"># 3</span></span><br></pre></td></tr></tbody></table></figure><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701232400669.png"></p><ul><li><code>a</code>是一个标量的张量，这个张量有 42x63 个元素，每一个元素是一个标量</li><li><code>b</code>是一个向量的张量，这个张量由4个3D <code>vector</code>组成的张量</li><li><code>C</code>是一个张量的矩阵，这个矩阵有 3x5 个元素，每一个元素是 2x2 的矩阵</li><li><code>loss</code>的<code>shape</code>为空，说明它是一个0D的张量，也就是一个元素的张量：标量</li></ul><p>不难看出，<code>shape</code>是这个张量的真正维度，前面的数字表述的是这个量里面的每个元素的维度。</p><h4 id="Computation"><a href="#Computation" class="headerlink" title="Computation"></a>Computation</h4><h5 id="Kernels"><a href="#Kernels" class="headerlink" title="Kernels"></a>Kernels</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210701235850626.png"></p><p>计算里最重要的概念是<code>kernel</code>，太极中<code>kernel</code>是用于计算的函数。</p><p>太极<code>kernel</code>中自己有一个语言，这个语言和Python非常非常像，唯一的区别是这个语言会被即时编译的。太极自带一个编译器把<code>kernel</code>里面的语言编译成高性能<code>kernel</code>，这样就能摆脱Python运行很慢的问题。</p><h5 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000731717.png"></p><p>太极的<code>func</code>可以被<code>kernel</code>调用，但不可以被Python调用。</p><h5 id="Scalar-math"><a href="#Scalar-math" class="headerlink" title="Scalar math"></a>Scalar math</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000807920.png"></p><h5 id="Matrices-and-linear-algebra"><a href="#Matrices-and-linear-algebra" class="headerlink" title="Matrices and linear algebra"></a>Matrices and linear algebra</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702001019222.png"></p><p>物理模拟很多时候要用到线性代数，<code>ti.Matrix</code>是用来做小矩阵的。如果有很大的阶数需要考虑要不要用<code>tensors</code>而不是数组，因为太极中的一些机制会导致大数组非常慢，但小数组就会非常非常快。</p><h5 id="Parallel-for-loops"><a href="#Parallel-for-loops" class="headerlink" title="Parallel for-loops"></a>Parallel for-loops</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003140404.png"></p><p>接下来我们来讲一讲并行<code>for</code>循环。太极里有两种<code>for</code>循环：</p><ul><li>Range-for loops 和Python的<code>for</code>循环没有区别</li><li>Struct-for loops 遍历稀疏张量里所有的元素</li></ul><h5 id="Range-for-loops"><a href="#Range-for-loops" class="headerlink" title="Range-for loops"></a>Range-for loops</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011544805.png"></p><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011613661.png"></p><p>要注意的是我们只会自动并行最外层的<code>for</code>循环，如果在<code>for</code>前面嵌套一个<code>if</code>就不会被自动并行，被认为是一个Serial，做过并行编程的同学应该很容易理解。</p><h5 id="Struct-for-loops"><a href="#Struct-for-loops" class="headerlink" title="Struct-for loops"></a>Struct-for loops</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011648101.png"></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init(arch=ti.gpu)</span><br><span class="line"></span><br><span class="line">n = <span class="number">320</span></span><br><span class="line">pixels = ti.var(dt=ti.f32, shape=(n * <span class="number">2</span>, n))</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paint</span>(<span class="params">t: ti.f32</span>):</span><br><span class="line">    <span class="keyword">for</span> i, j <span class="keyword">in</span> pixels:</span><br><span class="line">        pixels[i, j] = i * <span class="number">0.001</span> + j * <span class="number">0.002</span> + t</span><br><span class="line"></span><br><span class="line">paint(<span class="number">0.3</span>)</span><br></pre></td></tr></tbody></table></figure><p>我们定义了一个叫做<code>pixels</code>的<code>tensors</code>，每一个元素是32位的浮点数，<code>shape</code>为 640x320。</p><h5 id="Atomic-Operations"><a href="#Atomic-Operations" class="headerlink" title="Atomic Operations"></a>Atomic Operations</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702011729708.png"></p><p>并行中很多时候需要原子操作，在太极里面例如<code>x[i]+=1</code>自动是原子操作。</p><h5 id="Taichi-scope-v-s-Python-scope"><a href="#Taichi-scope-v-s-Python-scope" class="headerlink" title="Taichi-scope v.s. Python-scope"></a>Taichi-scope v.s. Python-scope</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003245409.png"></p><ul><li>Taichi-scope 任何被<code>ti.kernel</code>或<code>ti.func</code>修饰的函数</li><li>Python-scope 任何不在Taichi-scope的代码</li></ul><h5 id="Playing-with-tensors-in-Taichi-scope"><a href="#Playing-with-tensors-in-Taichi-scope" class="headerlink" title="Playing with tensors in Taichi-scope"></a>Playing with tensors in Taichi-scope</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702013945651.png"></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init()</span><br><span class="line"></span><br><span class="line">a = ti.var(dt=ti.f32, shape=(<span class="number">42</span>, <span class="number">63</span>))</span><br><span class="line">b = ti.Vector(<span class="number">3</span>, dt=ti.f32, shape=<span class="number">4</span>)</span><br><span class="line">C = ti.Matrix(<span class="number">2</span>, <span class="number">2</span>, dt=ti.f32, shape=(<span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    a[<span class="number">3</span>, <span class="number">4</span>] = <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'a[3, 4] = '</span>, a[<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">    b[<span class="number">2</span>] = [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'b[0] = '</span>, b[<span class="number">0</span>], <span class="string">'  b[2] = '</span>, b[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    C[<span class="number">2</span>, <span class="number">1</span>][<span class="number">0</span>, <span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'C[2, 1] = '</span>, C[<span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></tbody></table></figure><h5 id="Phases-of-a-Taichi-program"><a href="#Phases-of-a-Taichi-program" class="headerlink" title="Phases of a Taichi program"></a>Phases of a Taichi program</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702003323334.png"></p><h5 id="Putting-everything-together"><a href="#Putting-everything-together" class="headerlink" title="Putting everything together"></a>Putting everything together</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702014743828.png"></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> taichi <span class="keyword">as</span> ti</span><br><span class="line">ti.init(arch=ti.gpu)</span><br><span class="line"></span><br><span class="line">n = <span class="number">320</span></span><br><span class="line">pixels = ti.var(dt=ti.f32, shape=(n * <span class="number">2</span>, n))</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.func</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">complex_sqr</span>(<span class="params">z</span>):</span><br><span class="line">    <span class="keyword">return</span> ti.Vector([z[<span class="number">0</span>]**<span class="number">2</span> - z[<span class="number">1</span>]**<span class="number">2</span>, z[<span class="number">1</span>] * z[<span class="number">0</span>] * <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">@ti.kernel</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paint</span>(<span class="params">t: ti.f32</span>):</span><br><span class="line">    <span class="keyword">for</span> i, j <span class="keyword">in</span> pixels:</span><br><span class="line">        c = ti.Vector([-<span class="number">0.8</span>, ti.cos(t) * <span class="number">0.2</span>])</span><br><span class="line">        z = ti.Vector([i / n - <span class="number">1</span>, j / n - <span class="number">0.5</span>]) * <span class="number">2</span></span><br><span class="line">        iterations = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> z.norm() &lt; <span class="number">20</span> <span class="keyword">and</span> iterations &lt; <span class="number">50</span>:</span><br><span class="line">            z = complex_sqr(z) + c</span><br><span class="line">            iterations += <span class="number">1</span></span><br><span class="line">        pixels[i, j] = <span class="number">1</span> - iterations * <span class="number">0.02</span></span><br><span class="line"></span><br><span class="line">gui = ti.GUI(<span class="string">"Julia Set"</span>,res=(n * <span class="number">2</span>, n))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">    paint(i * <span class="number">0.03</span>)</span><br><span class="line">    gui.set_image(pixels)</span><br><span class="line">    gui.show()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702020346244.png"></p><h4 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h4><h5 id="Debug-mode"><a href="#Debug-mode" class="headerlink" title="Debug mode"></a>Debug mode</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000324169.png"></p><p>下面是怎么调试太极陈谷。在初始化时设置<code>debug = True</code>时会做一些额外的检查，比如图中的数组越界。</p><h5 id="Thank-you"><a href="#Thank-you" class="headerlink" title="Thank you!"></a>Thank you!</h5><p><img data-src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/Yousazoe/picgo-repo/img/image-20210702000254571.png"></p></div><div class="popular-posts-header">Related Posts</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/22a0791d.html" rel="bookmark">Lagrangian Simulation Approaches</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/692c2b09.html" rel="bookmark">GAMES101-SUM</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/archives/7dbe30e4.html" rel="bookmark">Blockwise Multi-Order Feature Regression for Real-Time Path Tracing Reconstruction</a></div></li></ul><footer class="post-footer"><div class="post-tags"><a href="/tags/Computer-Graphics/" rel="tag"># Computer Graphics</a> <a href="/tags/Physics/" rel="tag"># Physics</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/c4d910e6.html" rel="prev" title="自动备份Hexo博客源文件"><i class="fa fa-chevron-left"></i> 自动备份Hexo博客源文件</a></div><div class="post-nav-item"><a href="/archives/22a0791d.html" rel="next" title="Lagrangian Simulation Approaches">Lagrangian Simulation Approaches <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Physics-Engine"><span class="nav-number">2.</span> <span class="nav-text">Physics Engine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application"><span class="nav-number">3.</span> <span class="nav-text">Application</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-Incredible-machines"><span class="nav-number">3.1.</span> <span class="nav-text">The Incredible machines</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Angry-Birds"><span class="nav-number">3.2.</span> <span class="nav-text">Angry Birds</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Phun-Algodoo"><span class="nav-number">3.3.</span> <span class="nav-text">Phun (Algodoo)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Besieged"><span class="nav-number">3.4.</span> <span class="nav-text">Besieged</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#My-Own-Physical-Simulation-Story"><span class="nav-number">4.</span> <span class="nav-text">My Own Physical Simulation Story</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#My-first-physics-engine"><span class="nav-number">4.1.</span> <span class="nav-text">My first physics engine</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#My-own-rigid-body-simulator"><span class="nav-number">4.2.</span> <span class="nav-text">My own rigid body simulator</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#My-rigid-body-game"><span class="nav-number">4.3.</span> <span class="nav-text">My rigid body game</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#My-fluid-simulator"><span class="nav-number">4.4.</span> <span class="nav-text">My fluid simulator</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#My-smoke-simulator"><span class="nav-number">4.5.</span> <span class="nav-text">My smoke simulator</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#My-continuum-cutting-simulator"><span class="nav-number">4.6.</span> <span class="nav-text">My continuum + cutting simulator</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Differentiable-Simulation"><span class="nav-number">4.7.</span> <span class="nav-text">Differentiable Simulation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Now"><span class="nav-number">4.8.</span> <span class="nav-text">Now</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Keywords-of-this-course"><span class="nav-number">5.</span> <span class="nav-text">Keywords of this course</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Discretization"><span class="nav-number">5.1.</span> <span class="nav-text">Discretization</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Efficient-Solvers"><span class="nav-number">5.2.</span> <span class="nav-text">Efficient Solvers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Productivity"><span class="nav-number">5.3.</span> <span class="nav-text">Productivity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Performance"><span class="nav-number">5.4.</span> <span class="nav-text">Performance</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hardware-architecture"><span class="nav-number">5.5.</span> <span class="nav-text">Hardware architecture</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Structures"><span class="nav-number">5.6.</span> <span class="nav-text">Data Structures</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Parallelization"><span class="nav-number">5.7.</span> <span class="nav-text">Parallelization</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Differentiability"><span class="nav-number">5.8.</span> <span class="nav-text">Differentiability</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Taichi-Programming-Language-Introduction"><span class="nav-number">6.</span> <span class="nav-text">Taichi Programming Language Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Overview"><span class="nav-number">6.1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#What-is-Taichi"><span class="nav-number">6.2.</span> <span class="nav-text">What is Taichi?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Getting-started"><span class="nav-number">6.3.</span> <span class="nav-text">Getting started</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Installation"><span class="nav-number">6.3.1.</span> <span class="nav-text">Installation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Initialization"><span class="nav-number">6.3.2.</span> <span class="nav-text">Initialization</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data"><span class="nav-number">6.4.</span> <span class="nav-text">Data</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Data-types"><span class="nav-number">6.4.1.</span> <span class="nav-text">Data types</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Tensors"><span class="nav-number">6.4.2.</span> <span class="nav-text">Tensors</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Computation"><span class="nav-number">6.5.</span> <span class="nav-text">Computation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Kernels"><span class="nav-number">6.5.1.</span> <span class="nav-text">Kernels</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Functions"><span class="nav-number">6.5.2.</span> <span class="nav-text">Functions</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Scalar-math"><span class="nav-number">6.5.3.</span> <span class="nav-text">Scalar math</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Matrices-and-linear-algebra"><span class="nav-number">6.5.4.</span> <span class="nav-text">Matrices and linear algebra</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Parallel-for-loops"><span class="nav-number">6.5.5.</span> <span class="nav-text">Parallel for-loops</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Range-for-loops"><span class="nav-number">6.5.6.</span> <span class="nav-text">Range-for loops</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Struct-for-loops"><span class="nav-number">6.5.7.</span> <span class="nav-text">Struct-for loops</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Atomic-Operations"><span class="nav-number">6.5.8.</span> <span class="nav-text">Atomic Operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Taichi-scope-v-s-Python-scope"><span class="nav-number">6.5.9.</span> <span class="nav-text">Taichi-scope v.s. Python-scope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Playing-with-tensors-in-Taichi-scope"><span class="nav-number">6.5.10.</span> <span class="nav-text">Playing with tensors in Taichi-scope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Phases-of-a-Taichi-program"><span class="nav-number">6.5.11.</span> <span class="nav-text">Phases of a Taichi program</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Putting-everything-together"><span class="nav-number">6.5.12.</span> <span class="nav-text">Putting everything together</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Debugging"><span class="nav-number">6.6.</span> <span class="nav-text">Debugging</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Debug-mode"><span class="nav-number">6.6.1.</span> <span class="nav-text">Debug mode</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Thank-you"><span class="nav-number">6.6.2.</span> <span class="nav-text">Thank you!</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Yousazoe" src="https://img.yousazoe.top/uPic/img/blog/icon/icon.jpeg"><p class="site-author-name" itemprop="name">Yousazoe</p><div class="site-description" itemprop="description">done is better than perfect</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">281</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:zoeyousa@gmail.com" title="E-Mail → mailto:zoeyousa@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://github.com/Yousazoe" title="GitHub → https://github.com/Yousazoe" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://twitter.com/YousaZoe" title="Twitter → https://twitter.com/YousaZoe" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" title="Weibo → https://www.weibo.com/6034231696/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://steamcommunity.com/profiles/76561198856466228/" title="Steam → https://steamcommunity.com/profiles/76561198856466228/" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://www.chess.com/member/yousazoe" title="Chess → https://www.chess.com/member/yousazoe" rel="noopener" target="_blank"><i class="fa fa-chess-pawn fa-fw"></i></a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://img.yousazoe.top/js/twopeople1.js"></script><script src="https://img.yousazoe.top/js/zdog.dist.js"></script><script id="rendered-js" src="https://img.yousazoe.top/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="cc-license animated" itemprop="sponsor"><link rel="preconnect" href="https://www.netlify.com"><span class="exturl cc-opacity" title="Deploy with Netlify → https://www.netlify.com" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20="><img width="80" src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Netlify"></span></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="translate-style">繁/简：<a id="translateLink" href="javascript:translatePage();">繁体</a></div><script type="text/javascript" src="/js/tw_cn.js"></script><script type="text/javascript">var defaultEncoding=2,translateDelay=0,cookieDomain="https://tding.top/",msgToTraditionalChinese="繁体",msgToSimplifiedChinese="简体",translateButtonId="translateLink";translateInitilization()</script><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">晋ICP备2021009930号 </a><img src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://img.yousazoe.top/uPic/img/blog/icon/beian.png" style="display:inline-block"></div><div class="copyright">© 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Yousazoe</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="Symbols count total">4.4m</span></div><div class="powered-by"><span><a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral"><img src="https://img.yousazoe.top/uPic/img/blog/icon/mona-loading-default.gif" data-original="https://cdn.jsdelivr.net/gh/YukiNoUta/cdn-static@main/blog/svg/upyun.svg" width="53" height="18" style="fill:currentColor;display:inline-block"></a></span><span class="post-meta-divider">|</span>今早雾霾蔽日，但是不要害怕，太阳依旧在云端</div><div class="busuanzi-count"><script data-pjax="" async="" src="js/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:inline"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:inline"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="//unpkg.com/animejs@3.1.0/lib/anime.min.js"></script><script src="//npm.elemecdn.com/pjax/pjax.min.js"></script><script src="//lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="//unpkg.com/lozad@1.16.0/dist/lozad.min.js"></script><script src="//lib.baomitu.com/pangu/4.0.7/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
    $(document).ready(function () {

    if(location.href.indexOf("#reloaded")==-1){
        location.href=location.href+"#reloaded";
        location.reload();
    }
}）
#在这后面可以加入程序的其他代码  


  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });

  
  NexT.boot.refresh();
  
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  
  NexT.utils.updateSidebarPosition();
});</script><script defer="" src="//img.yousazoe.top/js/three.min.js"></script><script defer="" src="//img.yousazoe.top/js/caidai.js"></script><script data-pjax="">!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script data-pjax="">document.querySelectorAll(".pdfobject-container").forEach(e=>{var t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),r=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${r}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script data-pjax="">document.querySelectorAll("pre.mermaid").length&&NexT.utils.getScript("//lib.baomitu.com/mermaid/8.4.8/mermaid.min.js",()=>{mermaid.initialize({theme:"forest",logLevel:3,flowchart:{curve:"linear"},gantt:{axisFormat:"%m/%d/%Y"},sequence:{actorMargin:50}})},window.mermaid)</script><div id="pjax"></div><script type="text/javascript" src="/js/cursor/fireworks.js"></script><script src="https://img.yousazoe.top/live2dw/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/hijiki.model.json"},display:{position:"right",width:100,height:200},mobile:{show:!0},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:5,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>